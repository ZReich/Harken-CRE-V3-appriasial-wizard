/* ===========================================
   EXPANDABLE CHIP-STYLE SELECTOR COMPONENT
   Premium Redesign - Subtle & Professional
   =========================================== */

/* Color variables - Refined palette */
:root {
    /* Primary accent - Harken brand */
    --es-accent: #4db8d1;
    --es-accent-soft: rgba(77, 184, 209, 0.08);
    --es-accent-medium: rgba(77, 184, 209, 0.15);
    
    /* Neutral tones */
    --es-text-primary: #1c3643;
    --es-text-secondary: #64748b;
    --es-text-muted: #94a3b8;
    --es-border: #e2e8f0;
    --es-border-hover: #cbd5e1;
    --es-bg-white: #ffffff;
    --es-bg-subtle: #f8fafc;
    --es-bg-hover: #f1f5f9;
    
    /* Selection state - subtle, not loud */
    --es-selected-bg: #f0f9ff;
    --es-selected-border: #4db8d1;
    --es-selected-text: #0c4a6e;
    --es-selected-indicator: #4db8d1;
}

/* Container */
.expandable-selector-group {
    margin-bottom: 12px;
    position: relative;
}

.expandable-selector-group:last-child {
    margin-bottom: 0;
}

/* ===========================================
   PARENT/HEADER ELEMENT - Clean & Minimal
   =========================================== */
.es-parent {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid var(--es-border);
    user-select: none;
    background-color: var(--es-bg-white);
    position: relative;
    color: var(--es-text-primary);
}

.es-parent:hover {
    border-color: var(--es-border-hover);
    background-color: var(--es-bg-subtle);
}

.es-parent .es-label {
    flex: 1;
    color: var(--es-text-primary);
}

.es-parent .es-expand-icon {
    margin-left: 8px;
    transition: transform 0.25s ease;
    opacity: 0.4;
    display: flex;
    align-items: center;
}

.es-parent .es-expand-icon svg {
    width: 18px;
    height: 18px;
    transition: transform 0.25s ease;
}

.es-parent:hover .es-expand-icon {
    opacity: 0.7;
}

.es-parent.expanded .es-expand-icon svg {
    transform: rotate(180deg);
}

.es-parent.expanded .es-expand-icon {
    opacity: 0.9;
    color: var(--es-accent);
}

/* ===========================================
   SELECTED VALUE CHIP - Clear & Visible
   =========================================== */
.es-selected-value {
    font-size: 13px;
    font-weight: 600;
    color: #0c4a6e;
    margin-left: auto;
    margin-right: 10px;
    background-color: #e0f2fe;
    padding: 5px 12px;
    border-radius: 6px;
    max-width: 160px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    border: 1px solid #7dd3fc;
}

/* ===========================================
   HAS SELECTION STATE - Elegant Indicator
   =========================================== */
.es-parent.has-selection {
    background-color: var(--es-bg-white);
    border-color: var(--es-accent);
    border-left-width: 3px;
    padding-left: 14px;
}

.es-parent.has-selection .es-label {
    color: var(--es-text-primary);
}

/* Remove the old thick bar indicator */
.es-parent.has-selection::before {
    display: none;
}

/* ===========================================
   EXPANDED STATE
   =========================================== */
.es-parent.expanded {
    border-color: var(--es-accent);
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    background-color: var(--es-bg-white);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

/* ===========================================
   CATEGORY COLORS - Very Subtle, Professional
   =========================================== */
/* All categories use the same neutral styling with accent on selection */
.es-parent.es-category-site,
.es-parent.es-category-structure,
.es-parent.es-category-systems,
.es-parent.es-category-interior,
.es-parent.es-category-market,
.es-parent.es-category-default {
    color: var(--es-text-primary);
}

/* ===========================================
   DROPDOWN OPTIONS CONTAINER
   =========================================== */
.es-suboptions {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.25s ease, padding 0.2s ease, opacity 0.15s ease;
    background-color: var(--es-bg-white);
    border-radius: 0 0 8px 8px;
    margin-top: -1px;
    opacity: 0;
    border: 1px solid transparent;
    border-top: none;
    position: relative;
    z-index: 150; /* Above the click overlay (z-index: 99) */
}

.es-suboptions.expanded {
    max-height: 400px;
    padding: 6px 0;
    opacity: 1;
    border-color: var(--es-accent);
    box-shadow: 0 8px 16px -4px rgba(0, 0, 0, 0.08);
    overflow-y: auto;
}

/* Ensure the parent button is also above overlay when expanded */
.es-parent.expanded {
    z-index: 150;
    position: relative;
}

/* Ensure the whole group is above overlay when active */
.expandable-selector-group:has(.es-parent.expanded) {
    z-index: 150;
    position: relative;
}

/* ===========================================
   INDIVIDUAL OPTIONS - Clean & Minimal
   =========================================== */
.es-suboption {
    display: flex;
    align-items: center;
    padding: 10px 16px 10px 16px;
    font-size: 13px;
    font-weight: 450;
    cursor: pointer;
    transition: all 0.15s ease;
    color: var(--es-text-secondary);
    position: relative;
    margin: 0 6px;
    border-radius: 6px;
}

/* Remove the dot indicator - cleaner look */
.es-suboption::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 0;
    border-radius: 2px;
    background-color: var(--es-accent);
    transition: height 0.15s ease;
}

.es-suboption:hover {
    background-color: #e0f2fe !important; /* Light blue hover */
    color: #0c4a6e !important;
}

.es-suboption:hover::before {
    height: 60%;
    background-color: #4db8d1 !important;
}

/* Selected option */
.es-suboption.selected {
    background-color: #dbeafe !important; /* Soft blue selected */
    color: #1e40af !important;
    font-weight: 600 !important;
}

.es-suboption.selected::before {
    height: 70%;
    background-color: #4db8d1 !important;
}

/* Checkmark icon */
.es-suboption .es-check-icon {
    margin-left: auto;
    opacity: 0;
    transition: opacity 0.15s ease, transform 0.15s ease;
    color: var(--es-accent);
    display: flex;
    align-items: center;
    transform: scale(0.8);
}

.es-suboption .es-check-icon svg {
    width: 16px;
    height: 16px;
}

.es-suboption.selected .es-check-icon {
    opacity: 1;
    transform: scale(1);
}

/* ===========================================
   CUSTOM INPUT SECTION
   =========================================== */
.es-custom-container {
    padding: 8px 12px;
    display: none;
    margin: 0 6px;
}

.es-custom-container.visible {
    display: block;
}

.es-custom-input {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid var(--es-border);
    border-radius: 6px;
    font-size: 13px;
    font-family: inherit;
    color: var(--es-text-primary);
    transition: all 0.2s ease;
    background-color: var(--es-bg-subtle);
}

.es-custom-input:focus {
    outline: none;
    border-color: var(--es-accent);
    background-color: var(--es-bg-white);
    box-shadow: 0 0 0 3px var(--es-accent-soft);
}

.es-custom-input::placeholder {
    color: var(--es-text-muted);
}

/* ===========================================
   REQUIRED INDICATOR
   =========================================== */
.es-required {
    color: #dc2626;
    margin-left: 2px;
    font-weight: 400;
}

/* ===========================================
   COMPACT VARIANT
   =========================================== */
.es-compact .es-parent {
    padding: 10px 12px;
    font-size: 13px;
}

.es-compact .es-suboption {
    padding: 8px 12px;
    font-size: 12px;
}

.es-compact .es-selected-value {
    font-size: 11px;
    padding: 3px 8px;
}

/* ===========================================
   UTILITY CLASSES
   =========================================== */
.es-hidden {
    display: none !important;
}

.es-disabled {
    opacity: 0.5;
    pointer-events: none;
}

.es-disabled .es-parent {
    cursor: not-allowed;
    background-color: var(--es-bg-subtle);
}

/* ===========================================
   RESPONSIVE ADJUSTMENTS
   =========================================== */
@media (max-width: 640px) {
    .es-parent {
        padding: 10px 12px;
        font-size: 13px;
    }
    
    .es-suboption {
        padding: 10px 12px;
        font-size: 12px;
    }
    
    .es-selected-value {
        max-width: 100px;
        font-size: 11px;
    }
}

/* ===========================================
   DARK MODE SUPPORT (future-ready)
   =========================================== */
@media (prefers-color-scheme: dark) {
    /* Variables would be overridden here */
}
