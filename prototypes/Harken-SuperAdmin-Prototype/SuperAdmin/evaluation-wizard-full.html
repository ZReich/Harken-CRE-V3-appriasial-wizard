<!DOCTYPE html>
<html lang="en">
<!--
╔══════════════════════════════════════════════════════════════════════════════╗
║                   EVALUATION CREATION WIZARD - PROTOTYPE                      ║
║                        File Organization Guide                                ║
╚══════════════════════════════════════════════════════════════════════════════╝

PURPOSE:
--------
This is a working prototype of the Evaluation Creation Wizard that demonstrates
the complete user experience for creating a new property evaluation. This file
will be converted to React components and TypeScript for production.

FILE STRUCTURE:
--------------
This single HTML file is organized with clear component markers (=====) that
indicate where each section will be extracted into React components.

TABLE OF CONTENTS:
------------------
1. CSS STYLES (lines ~10-695)
   ├── Global Styles → src/index.css
   ├── Navbar → src/components/layout/Navbar.tsx
   ├── Progress Stepper → src/components/wizard/ProgressStepper.tsx
   ├── Overview Sidebar → src/components/wizard/OverviewSidebar.tsx
   ├── Main Content → src/components/wizard/WizardContent.tsx
   ├── Form Elements → src/components/common/FormSection.tsx
   ├── Buttons → src/components/common/Button.tsx
   ├── Drag & Drop → src/components/common/DragDropZone.tsx
   ├── Info Boxes → src/components/common/InfoBox.tsx
   ├── AI Features → src/components/common/AIButton.tsx
   ├── Map Tools → src/components/wizard/MapTools.tsx
   ├── Cards → src/components/wizard/TemplateCard.tsx & ApproachCard.tsx
   └── Footer Navigation → src/components/wizard/WizardFooter.tsx

2. HTML STRUCTURE (lines ~697-1780)
   ├── Navbar
   ├── Progress Stepper (5 steps)
   ├── Step 1: Template Selection → src/components/wizard/steps/TemplateSelection.tsx
   ├── Step 2: Setup → src/components/wizard/steps/SetupStep.tsx
   ├── Step 3: Overview → src/components/wizard/steps/OverviewStep.tsx
   │   ├── Left Sidebar Navigation (12 sections)
   │   └── Main Content (Property Details, Specifications, Analysis, etc.)
   ├── Step 4: Exhibits → src/components/wizard/steps/ExhibitsStep.tsx
   ├── Step 5: Review → src/components/wizard/steps/ReviewStep.tsx
   └── Footer Navigation

3. JAVASCRIPT LOGIC (lines ~1789-end)
   ├── State Management → React Context or Zustand
   ├── Template Selection → TemplateSelection.tsx state
   ├── Approach Selection → SetupStep.tsx state
   ├── Wizard Navigation → useWizardNavigation.ts hook
   ├── Progress Tracking → useWizardProgress.ts hook
   └── Overview Navigation → OverviewStep.tsx hooks

COMPONENT HIERARCHY (Future React Structure):
--------------------------------------------
App
└── EvaluationWizard (src/pages/evaluation/EvaluationWizard.tsx)
    ├── Navbar (shared)
    ├── ProgressStepper
    ├── WizardContent
    │   ├── TemplateSelection (Step 1)
    │   ├── SetupStep (Step 2)
    │   │   ├── ClientSelector
    │   │   └── ApproachCards (multi-select)
    │   ├── OverviewStep (Step 3)
    │   │   ├── OverviewSidebar (navigation)
    │   │   └── FormSections
    │   │       ├── PropertyDetails
    │   │       ├── Specifications
    │   │       ├── Analysis
    │   │       ├── Amenities
    │   │       ├── Zoning
    │   │       ├── Images (drag & drop)
    │   │       ├── Photos (upload)
    │   │       ├── MapBoundary (drawing)
    │   │       ├── AerialMap
    │   │       ├── AreaInfo (rich text)
    │   │       ├── TaxAssessment
    │   │       └── MapBoundaries (summary)
    │   ├── ExhibitsStep (Step 4)
    │   └── ReviewStep (Step 5)
    └── WizardFooter (Back, Save, Continue)

STATE MANAGEMENT:
----------------
- Wizard state (current step, completed steps, form data)
- Form validation state (field errors, section completion)
- Auto-save state (last saved, is saving, has changes)
- Template/Approach selection state

KEY FEATURES TO IMPLEMENT:
--------------------------
- Real-time form validation
- Auto-save functionality (every 30s or on blur)
- Step completion tracking with checkmarks
- Conditional step rendering (dynamic approach steps)
- Section completion indicators in Overview sidebar
- Google Maps integration for property location
- Rich text editors for City/County/Area Info
- Drag & drop file uploads
- Image reordering and management
- PDF generation preview

SHARED UTILITIES:
----------------
- src/hooks/useWizardNavigation.ts - Step navigation logic
- src/hooks/useFormValidation.ts - Form validation rules
- src/hooks/useAutoSave.ts - Auto-save functionality
- src/utils/wizardHelpers.ts - Helper functions
- src/utils/mapHelpers.ts - Google Maps integration
- src/utils/fileHelpers.ts - File upload utilities

TESTING PRIORITIES:
------------------
1. Navigation between steps (forward/back)
2. Form validation and error display
3. Auto-save and data persistence
4. File upload and image management
5. Map boundary drawing and saving
6. Final review and submission

NOTES:
------
- All Material Icons are loaded from Google Fonts CDN
- Tailwind CSS is loaded from CDN for rapid prototyping
- Maps use Google Maps JavaScript API (requires API key in production)
- Rich text editors will use Quill or similar in React version
- Auto-save will use debouncing to prevent excessive API calls
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create New Evaluation - Harken CRE</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ============================================ */
        /* GLOBAL STYLES                               */
        /* FUTURE: src/index.css or App.css           */
        /* ============================================ */
        * {
            font-family: 'Montserrat', sans-serif;
        }

        .material-icons {
            font-family: 'Material Icons' !important;
        }

        body {
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }

        /* ============================================ */
        /* COMPONENT: Navbar                           */
        /* FUTURE: src/components/layout/Navbar.tsx   */
        /* ============================================ */
        .navbar {
            background: url(https://app.harkenbov.com/assets/img/accent-white-bright.png) top left/contain #1c3643;
            background-color: #1c3643 !important;
            height: 70px;
            color: #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 8px 20px;
            border-radius: 25px;
            transition: all 0.2s;
            border: 1px solid transparent;
            font-weight: 500;
            font-size: 14px;
        }

        .nav-link:hover {
            background-color: rgba(255,255,255,0.05);
        }

        .nav-link.active {
            background-color: transparent;
            border: 1px solid #0da1c7;
            color: #0da1c7;
        }

        /* ============================================ */
        /* COMPONENT: Progress Stepper                */
        /* FUTURE: src/components/wizard/ProgressStepper.tsx */
        /* ============================================ */
        .progress-container {
            background: white;
            padding: 24px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            position: sticky;
            top: 70px;
            z-index: 999;
        }

        .stepper {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            max-width: 1000px;
            margin: 0 auto 16px;
            flex-wrap: wrap;
        }

        .step-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            border-radius: 8px;
            transition: background-color 0.2s;
        }

        .step-item:hover {
            background-color: rgba(13, 161, 199, 0.08);
        }

        .step-circle {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #687F8B;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            transition: all 0.3s;
        }

        .step-circle.active {
            background: linear-gradient(135deg, #0da1c7 0%, #38bfd9 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(13, 161, 199, 0.4);
        }

        .step-circle.completed {
            background: #2e7d32;
            color: white;
        }

        .step-label {
            font-size: 13px;
            font-weight: 600;
            color: #687F8B;
        }

        .step-item.active .step-label {
            color: #0da1c7;
        }

        .progress-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0da1c7 0%, #38bfd9 100%);
            transition: width 0.5s ease;
        }

        /* ============================================ */
        /* COMPONENT: Overview Left Sidebar           */
        /* FUTURE: src/components/wizard/OverviewSidebar.tsx */
        /* ============================================ */
        .overview-layout {
            display: flex;
            gap: 0;
            max-width: 100%;
            margin: 0;
            padding: 0;
        }

        .left-sidebar {
            width: 260px;
            background: white;
            border-right: 1px solid #e0e0e0;
            padding: 0;
            position: sticky;
            top: 182px;
            height: fit-content;
            max-height: calc(100vh - 182px);
            overflow-y: auto;
            flex-shrink: 0;
        }

        .sidebar-item {
            padding: 16px 20px;
            font-size: 12px;
            font-weight: 600;
            color: #687F8B;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-left: 3px solid transparent;
            letter-spacing: 0.3px;
        }

        .sidebar-item:hover {
            background: #f9f9f9;
        }

        .sidebar-item.active {
            color: #0da1c7;
            background: #e8f5f7;
            border-left-color: #0da1c7;
        }

        .sidebar-item.completed .sidebar-check {
            display: inline;
            animation: checkmarkIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .sidebar-check {
            color: #2e7d32;
            font-size: 18px;
            display: none;
        }

        @keyframes checkmarkIn {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* ============================================ */
        /* COMPONENT: Wizard Main Content Area        */
        /* FUTURE: src/components/wizard/WizardContent.tsx */
        /* ============================================ */
        .main-content {
            flex: 1;
            min-width: 0;
            padding: 40px 60px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* ============================================ */
        /* COMPONENT: Wizard Page/Step Container      */
        /* FUTURE: src/components/wizard/WizardStep.tsx */
        /* ============================================ */
        .page-section {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }

        .page-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ============================================ */
        /* COMPONENT: Form Elements & Sections        */
        /* FUTURE: src/components/common/FormSection.tsx */
        /* ============================================ */
        .form-section {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
        }

        .form-section-title {
            font-size: 16px;
            font-weight: 700;
            color: #1c3643;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: #1c3643;
            margin-bottom: 8px;
        }

        .required {
            color: #dc3545;
            margin-left: 4px;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.2s;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #0da1c7;
            box-shadow: 0 0 0 3px rgba(13, 161, 199, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        /* ============================================ */
        /* COMPONENT: Amenities Chip Selector         */
        /* ============================================ */
        .amenities-search-container {
            position: relative;
            margin-bottom: 20px;
        }
        
        .amenities-search-input {
            width: 100%;
            padding: 10px 14px 10px 40px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            color: #1c3643;
            transition: border-color 0.2s;
        }
        
        .amenities-search-input:focus {
            outline: none;
            border-color: #0da1c7;
            box-shadow: 0 0 0 3px rgba(13, 161, 199, 0.1);
        }
        
        .amenities-search-input::placeholder {
            color: #9CA8B0;
        }
        
        .amenities-search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #687F8B;
            font-size: 20px;
        }
        
        .amenities-categories-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        
        .amenities-category-column {
            background-color: #fafbfc;
            border-radius: 6px;
            padding: 16px;
            border: 1px solid #e8eaed;
        }
        
        .amenities-category-header {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
            padding-bottom: 10px;
            border-bottom: 2px solid;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .amenities-category-header.outdoor {
            color: #4a90a4;
            border-bottom-color: #e8f4f8;
        }
        
        .amenities-category-header.indoor {
            color: #7b6b8e;
            border-bottom-color: #f5f2f8;
        }
        
        .amenities-category-header.utilities {
            color: #b8763e;
            border-bottom-color: #fef8f1;
        }
        
        .amenities-chips {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .amenity-chip {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
            user-select: none;
        }
        
        .amenity-chip:hover {
            transform: translateX(4px);
        }
        
        .amenity-chip.outdoor {
            background-color: white;
            color: #4a90a4;
        }
        
        .amenity-chip.outdoor:hover {
            background-color: #e8f4f8;
            border-color: #b8d4dd;
        }
        
        .amenity-chip.outdoor.selected {
            background-color: #d4eaf1;
            color: #2c5f6f;
            border-color: #4a90a4;
        }
        
        .amenity-chip.indoor {
            background-color: white;
            color: #7b6b8e;
        }
        
        .amenity-chip.indoor:hover {
            background-color: #f5f2f8;
            border-color: #d4c9de;
        }
        
        .amenity-chip.indoor.selected {
            background-color: #e8e0f0;
            color: #5a4a6d;
            border-color: #7b6b8e;
        }
        
        .amenity-chip.utilities {
            background-color: white;
            color: #b8763e;
        }
        
        .amenity-chip.utilities:hover {
            background-color: #fef8f1;
            border-color: #e8d4bb;
        }
        
        .amenity-chip.utilities.selected {
            background-color: #f9eee0;
            color: #8a5a2e;
            border-color: #b8763e;
        }
        
        .amenity-chip.hidden {
            display: none;
        }
        
        .amenity-checkmark {
            margin-left: auto;
            font-size: 18px;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .amenity-chip.selected .amenity-checkmark {
            opacity: 1;
        }
        
        @media (max-width: 1024px) {
            .amenities-categories-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ============================================ */
        /* COMPONENT: Buttons                         */
        /* FUTURE: src/components/common/Button.tsx  */
        /* ============================================ */
        .btn-primary {
            background: linear-gradient(135deg, #0da1c7 0%, #38bfd9 100%);
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(13, 161, 199, 0.3);
        }

        .btn-secondary {
            background: white;
            color: #1c3643;
            border: 1px solid #e0e0e0;
            padding: 12px 28px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            border-color: #0da1c7;
            color: #0da1c7;
        }

        /* ============================================ */
        /* COMPONENT: Drag & Drop Upload Zone         */
        /* FUTURE: src/components/common/DragDropZone.tsx */
        /* ============================================ */
        .drag-drop-zone {
            border: 2px dashed #0da1c7;
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            background: #f9fdfe;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 24px;
        }

        .drag-drop-zone:hover,
        .drag-drop-zone.drag-over {
            background: #e8f5f7;
            border-color: #38bfd9;
        }

        .drag-drop-icon {
            font-size: 48px;
            color: #0da1c7;
            margin-bottom: 12px;
        }

        .drag-drop-text {
            font-size: 15px;
            font-weight: 600;
            color: #1c3643;
            margin-bottom: 8px;
        }

        .drag-drop-hint {
            font-size: 13px;
            color: #687F8B;
        }

        /* ============================================ */
        /* COMPONENT: Info/Help Boxes                 */
        /* FUTURE: src/components/common/InfoBox.tsx */
        /* ============================================ */
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #1565c0;
            border-radius: 8px;
            padding: 16px 20px;
            margin-bottom: 24px;
        }

        .info-box-title {
            font-size: 14px;
            font-weight: 700;
            color: #1565c0;
            margin-bottom: 8px;
        }

        .info-box-text {
            font-size: 13px;
            color: #1c3643;
            line-height: 1.6;
        }

        /* ============================================ */
        /* COMPONENT: AI-Enhanced Features            */
        /* FUTURE: src/components/common/AIButton.tsx */
        /* ============================================ */
        .btn-ai {
            background: linear-gradient(135deg, #6a1b9a 0%, #9c27b0 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .btn-ai:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(106, 27, 154, 0.3);
        }

        .ai-badge {
            background: linear-gradient(135deg, #6a1b9a 0%, #9c27b0 100%);
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        /* ============================================ */
        /* COMPONENT: Map Tools & Container           */
        /* FUTURE: src/components/wizard/MapTools.tsx */
        /* ============================================ */
        .map-container {
            position: relative;
            height: 500px;
            background: #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }

        .map-tools {
            position: absolute;
            left: 16px;
            top: 16px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            padding: 8px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 10;
        }

        .map-tool-btn {
            width: 48px;
            height: 48px;
            border: none;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            position: relative;
        }

        .map-tool-btn:hover {
            background: #e8f5f7;
        }

        .map-tool-btn.active {
            background: #0da1c7;
            color: white;
        }

        .map-tool-btn .material-icons {
            font-size: 24px;
        }

        .map-tool-btn:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            left: calc(100% + 10px);
            top: 50%;
            transform: translateY(-50%);
            background: #1c3643;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
        }

        /* ============================================ */
        /* COMPONENT: Template & Approach Selection Cards */
        /* FUTURE: src/components/wizard/TemplateCard.tsx */
        /* FUTURE: src/components/wizard/ApproachCard.tsx */
        /* ============================================ */
        .template-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .approach-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .template-card, .approach-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .template-card:hover, .approach-card:hover {
            border-color: #0da1c7;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(13, 161, 199, 0.15);
        }

        .template-card.selected, .approach-card.selected {
            border-color: #0da1c7;
            background: #e8f5f7;
        }

        .template-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .template-card.selected .template-radio {
            border-color: #0da1c7;
            border-width: 6px;
        }

        .template-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: #2e7d32;
            color: white;
            font-size: 10px;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 4px;
            text-transform: uppercase;
        }

        /* Scenario badges for templates */
        .badge {
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            display: inline-block;
            letter-spacing: 0.3px;
        }

        .badge.system {
            background: #e3f2fd;
            color: #1976d2;
            border: 1px solid #bbdefb;
        }

        .badge.property-commercial {
            background: #fff3e0;
            color: #e65100;
            border: 1px solid #ffe0b2;
        }

        .badge.property-residential {
            background: #fce4ec;
            color: #c2185b;
            border: 1px solid #f8bbd0;
        }

        .badge.property-land {
            background: #e0f2f1;
            color: #00695c;
            border: 1px solid #b2dfdb;
        }

        .badge.type-evaluation {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #c8e6c9;
        }

        .badge.scenario-dual {
            background: #fef3c7;
            color: #92400E;
            border: 1px solid #fde68a;
        }

        .badge.scenario-multi {
            background: #E0E7FF;
            color: #3730A3;
            border: 1px solid #c7d2fe;
        }

        .template-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
            gap: 12px;
        }

        .template-title {
            font-size: 18px;
            font-weight: 600;
            color: #1c3643;
            margin: 0;
            flex: 1;
            line-height: 1.4;
        }

        .template-badges {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .template-description {
            font-size: 14px;
            color: #6B7280;
            margin: 0 0 20px 0;
            line-height: 1.6;
            min-height: 44px;
        }

        .template-stats {
            display: flex;
            gap: 20px;
            padding: 16px 0;
            border-top: 1px solid #F3F4F6;
            border-bottom: 1px solid #F3F4F6;
            margin-bottom: 0;
            flex-wrap: wrap;
        }

        .template-stat {
            font-size: 13px;
            color: #6B7280;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .approach-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #e0e0e0;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .approach-card.selected .approach-checkbox {
            background: #0da1c7;
            border-color: #0da1c7;
        }

        .approach-card.selected .approach-checkbox::after {
            content: '✓';
            color: white;
            font-weight: 700;
        }

        /* ============================================ */
        /* COMPONENT: Sales Comparison Approach       */
        /* FUTURE: src/components/wizard/steps/SalesApproachStep.tsx */
        /* ============================================ */
        .sales-approach-layout {
            display: flex;
            flex-direction: column;
            padding: 24px;
            background: #f5f5f5;
            min-height: calc(100vh - 250px);
            overflow-x: auto;
        }

        .sales-actions-top {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        /* ============================================ */
        /* COMPONENT: Sales Comparison Approach       */
        /* FUTURE: src/components/wizard/steps/SalesApproachStep.tsx */
        /* ============================================ */
        .sales-approach-layout {
            display: flex;
            gap: 16px;
            padding: 24px;
            background: #f5f5f5;
            min-height: calc(100vh - 250px);
            overflow-x: auto;
        }

        .field-list-panel {
            width: 200px;
            min-width: 200px;
            background: white;
            border-radius: 8px;
            padding: 16px;
            height: fit-content;
            position: sticky;
            left: 24px;
            z-index: 10;
        }

        .subject-property-card {
            width: 220px;
            min-width: 220px;
            background: #f5f7f9;
            border-radius: 8px;
            overflow: hidden;
        }

        .comps-container {
            display: flex;
            gap: 16px;
            flex: 1;
            overflow-x: auto;
        }

        .comp-property-card {
            width: 220px;
            min-width: 220px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }

        .totals-sidebar {
            width: 280px;
            min-width: 280px;
            background: white;
            border-radius: 8px;
            padding: 20px;
            height: fit-content;
            position: sticky;
            right: 24px;
            z-index: 10;
        }

        .property-card-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            background: #e0e0e0;
        }

        .property-card-content {
            padding: 12px;
        }

        .property-field-row {
            padding: 8px 0;
            border-bottom: 1px solid #e8e8e8;
            font-size: 11px;
        }

        .property-field-label {
            font-weight: 600;
            color: #687F8B;
            margin-bottom: 4px;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .property-field-value {
            color: #1c3643;
            font-size: 11px;
        }

        .field-list-row {
            margin-bottom: 8px;
        }

        .field-list-dropdown {
            width: 100%;
            padding: 8px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-size: 11px;
            background: white;
            margin-bottom: 4px;
        }

        .field-controls {
            display: flex;
            justify-content: flex-end;
            gap: 6px;
        }

        .sales-actions-top {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .btn-sales-action {
            flex: 1;
            min-width: 150px;
            padding: 12px 16px;
            background: white;
            border: 2px dashed #0da1c7;
            border-radius: 6px;
            color: #0da1c7;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .btn-sales-action .material-icons {
            font-size: 18px;
        }

        .btn-sales-action:hover {
            background: #e8f5f7;
            border-style: solid;
        }

        .btn-sales-action.primary {
            background: linear-gradient(135deg, #0da1c7 0%, #38bfd9 100%);
            color: white;
            border-style: solid;
        }

        .btn-sales-action.primary:hover {
            background: linear-gradient(135deg, #0891a7 0%, #2ca5ba 100%);
        }

        .comparison-table-wrapper {
            overflow-x: auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .comparison-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            min-width: 1400px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px 16px;
            border-right: 1px solid #e0e0e0;
            border-bottom: 1px solid #e0e0e0;
            vertical-align: top;
        }

        .comparison-table th:last-child,
        .comparison-table td:last-child {
            border-right: none;
        }

        .comparison-table thead th {
            background: white;
            font-weight: 700;
            color: #1c3643;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: sticky;
            top: 0;
            z-index: 10;
            border-bottom: 2px solid #e0e0e0;
        }

        .comparison-table .subject-column {
            background: #f5f7f9;
            width: 240px;
            min-width: 240px;
            position: sticky;
            left: 0;
            z-index: 5;
        }

        .comparison-table thead .subject-column {
            z-index: 15;
        }

        .comparison-table .comp-column {
            background: white;
            width: 280px;
            min-width: 280px;
        }

        .property-image-cell {
            padding: 0;
            height: 140px;
        }

        .property-image-cell img {
            width: 100%;
            height: 140px;
            object-fit: cover;
        }

        .field-label-row {
            font-weight: 600;
            color: #687F8B;
            font-size: 12px;
        }

        .field-with-controls {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .field-name-dropdown {
            flex: 1;
            padding: 6px 8px;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            font-size: 12px;
            background: white;
        }

        .btn-remove-field,
        .btn-add-instance {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
            padding: 0;
        }

        .btn-remove-field .material-icons,
        .btn-add-instance .material-icons {
            font-size: 16px;
        }

        .btn-remove-field {
            color: #dc3545;
        }

        .btn-remove-field:hover {
            background-color: rgba(220, 53, 69, 0.15);
        }

        .btn-add-instance {
            color: #0da1c7;
        }

        .btn-add-instance:hover {
            background-color: rgba(13, 161, 199, 0.15);
        }

        .info-icon-btn {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: none;
            background: transparent;
            color: #0da1c7;
            cursor: help;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }

        .info-icon-btn .material-icons {
            font-size: 16px;
        }

        .comp-value-cell {
            font-size: 13px;
            color: #1c3643;
        }

        .adjustment-cell {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .adjustment-cell select {
            flex: 1;
            padding: 6px 8px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-size: 12px;
            background: white;
        }

        .adj-percent-select {
            width: 70px;
        }

        .adj-comparison-select {
            width: 90px;
        }

        .notes-link {
            color: #0da1c7;
            text-decoration: none;
            font-size: 12px;
        }

        .notes-link:hover {
            text-decoration: underline;
        }

        .summary-row {
            background: #f9fafb;
            font-weight: 600;
        }

        .total-value-row {
            background: #e8f5f7;
            font-weight: 700;
            font-size: 16px;
        }

        .total-value-amount {
            color: #2e7d32;
            font-size: 18px;
        }

        /* Field Selector Modal */
        .field-selector-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .field-selector-modal.active {
            display: flex;
        }

        .field-selector-content {
            background: white;
            border-radius: 12px;
            width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .field-selector-header {
            padding: 24px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .field-selector-header h3 {
            font-size: 20px;
            font-weight: 700;
            color: #1c3643;
        }

        .btn-close-modal {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: #f0f0f0;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-close-modal:hover {
            background: #e0e0e0;
        }

        .field-selector-body {
            padding: 24px;
        }

        .field-search {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .field-search:focus {
            outline: none;
            border-color: #0da1c7;
        }

        .field-category {
            margin-bottom: 24px;
        }

        .field-category h4 {
            font-size: 13px;
            font-weight: 700;
            color: #687F8B;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .field-option {
            padding: 12px 16px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .field-option:hover {
            border-color: #0da1c7;
            background: #f0fbfd;
        }

        .supports-multiple {
            color: #0da1c7;
            font-size: 11px;
            font-weight: 600;
            background: #e8f5f7;
            padding: 4px 8px;
            border-radius: 4px;
        }

        /* ============================================ */
        /* COMPONENT: Wizard Footer Navigation        */
        /* FUTURE: src/components/wizard/WizardFooter.tsx */
        /* ============================================ */
        .wizard-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e0e0e0;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 998;
            box-shadow: 0 -2px 8px rgba(0,0,0,0.05);
        }

        .content-wrapper {
            padding-bottom: 80px;
        }

        /* ============================================ */
        /* COMPONENT: Character Counter & Auto-save   */
        /* FUTURE: src/components/common/CharacterCounter.tsx */
        /* ============================================ */
        .char-counter {
            font-size: 12px;
            color: #687F8B;
            margin-top: 6px;
        }

        .char-counter.warning {
            color: #ff9800;
        }

        .char-counter.danger {
            color: #dc3545;
        }

        /* Save Status */
        .save-status {
            font-size: 13px;
            color: #687F8B;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .save-status.saving {
            color: #ff9800;
        }

        .save-status.saved {
            color: #2e7d32;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .overview-layout {
                flex-direction: column;
            }

            .left-sidebar {
                width: 100%;
                position: static;
            }

            .form-row, .form-row-3 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ============================================ -->
    <!-- UNIFIED NAVIGATION COMPONENT -->
    <!-- ============================================ -->
    <style>.unified-navbar{background:url(https://app.harkenbov.com/assets/img/accent-white-bright.png) top left/contain #1c3643;background-color:#1c3643!important;height:84px;color:#fff;display:flex;align-items:center;justify-content:space-between;padding:0 32px;box-shadow:0 2px 8px rgba(0,0,0,0.1);position:sticky;top:0;z-index:1000}.nav-logo{height:40px;width:auto;cursor:pointer}.nav-center{display:flex;align-items:center;gap:8px;flex:1;justify-content:center}.nav-core-features{display:flex;align-items:center;gap:4px;background:rgba(13, 161, 199, 0.08);border-radius:25px;padding:4px 8px;margin-right:16px}.nav-link{color:white;text-decoration:none;padding:10px 20px;border-radius:25px;transition:all 0.2s;border:1px solid transparent;font-weight:500;font-size:14px;white-space:nowrap}.nav-link:hover{background-color:rgba(255,255,255,0.08)}.nav-link.core-feature{font-weight:500;font-size:14px;color:white}.nav-link.core-feature:hover{background-color:rgba(13, 161, 199, 0.2);color:white}.nav-link.core-feature.active{background-color:transparent;border:1px solid #0da1c7;color:#0da1c7;box-shadow:0 2px 4px rgba(13, 161, 199, 0.2)}.nav-link.active{background-color:transparent;border:1px solid #0da1c7;color:#0da1c7}.nav-separator{width:1px;height:24px;background:rgba(255, 255, 255, 0.2);margin:0 8px}.nav-user{display:flex;align-items:center;gap:12px}.nav-user-name{font-size:14px;font-weight:500;color:white}.nav-user-avatar{width:36px;height:36px;border-radius:50%;border:2px solid #0da1c7}.property-tabs-container{background:white;border-bottom:2px solid #e0e0e0;display:flex;padding:0 32px}.property-tab{padding:16px 24px;border:none;background:transparent;color:#687F8B;font-size:15px;font-weight:600;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;gap:8px;border-bottom:3px solid transparent;margin-bottom:-2px;font-family:'Montserrat', sans-serif}.property-tab:hover{color:#0da1c7;background:#f0fbfd}.property-tab.active{color:#0da1c7;border-bottom-color:#0da1c7;background:#f0fbfd}</style><nav class="unified-navbar"><img src="harken.png" alt="Harken CRE" class="nav-logo" onclick="window.location.href='SuperAdmin/super-admin-dashboard.html'"><div class="nav-center"><div class="nav-core-features"><a href="super-admin-comps.html" class="nav-link core-feature" id="nav-comps">COMPS</a><a href="super-admin-appraisals-list.html" class="nav-link core-feature" id="nav-appraisals">APPRAISAL</a><a href="super-admin-evaluations-list.html" class="nav-link core-feature" id="nav-evaluations">EVALUATION</a></div><div class="nav-separator"></div><a href="super-admin-dashboard.html" class="nav-link" id="nav-dashboard">Dashboard</a><a href="super-admin-users.html" class="nav-link" id="nav-users">Users</a><a href="super-admin-clients.html" class="nav-link" id="nav-clients">Clients</a><a href="super-admin-accounts.html" class="nav-link" id="nav-accounts">Accounts</a><a href="super-admin-reports.html" class="nav-link" id="nav-reports">Reports</a><a href="super-admin-support-tickets.html" class="nav-link" id="nav-support">Support</a><a href="super-admin-audit-logs.html" class="nav-link" id="nav-audit">Audit Logs</a><a href="super-admin-settings.html" class="nav-link" id="nav-settings">Settings</a></div><div class="nav-user"><span class="nav-user-name">Harken Admin</span><img src="https://i.pravatar.cc/150?img=33" alt="User" class="nav-user-avatar"></div></nav><div class="property-tabs-container" id="propertyTabsContainer"><button class="property-tab active" data-type="commercial" onclick="switchPropertyType('commercial')"><i class="material-icons" style="font-size: 18px;">business</i>Commercial</button><button class="property-tab" data-type="residential" onclick="switchPropertyType('residential')"><i class="material-icons" style="font-size: 18px;">home</i>Residential</button><button class="property-tab" data-type="land" onclick="switchPropertyType('land')"><i class="material-icons" style="font-size: 18px;">terrain</i>Land</button></div><script>function switchPropertyType(type){document.querySelectorAll('.property-tab').forEach(tab=>{tab.classList.remove('active');});document.querySelector(`[data-type="${type}"]`).classList.add('active');localStorage.setItem('activePropertyType',type);console.log('Switched to property type:',type);}window.addEventListener('load',function(){const savedType=localStorage.getItem('activePropertyType');if(savedType){switchPropertyType(savedType);}});</script>

    <!-- ============================================ -->
    <!-- COMPONENT: Progress Stepper                -->
    <!-- FUTURE: src/components/wizard/ProgressStepper.tsx -->
    <!-- ============================================ -->
    <div class="progress-container">
        <div class="stepper" id="stepperContainer">
            <div class="step-item active" style="cursor: pointer;" onclick="goToStepDirect(1)">
                <div class="step-circle active">1</div>
                <span class="step-label">Template</span>
            </div>
            <div class="step-item" style="cursor: pointer;" onclick="goToStepDirect(2)">
                <div class="step-circle">2</div>
                <span class="step-label">Setup</span>
            </div>
            <div class="step-item" style="cursor: pointer;" onclick="goToStepDirect(3)">
                <div class="step-circle">3</div>
                <span class="step-label">Overview</span>
            </div>
            <div class="step-item" id="step-item-sales-approach" style="display: flex; cursor: pointer;" onclick="goToStepDirect(4)">
                <div class="step-circle">4</div>
                <span class="step-label">Sales Approach</span>
            </div>
            <div class="step-item" style="cursor: pointer;" onclick="goToStepDirect(5)">
                <div class="step-circle">5</div>
                <span class="step-label">Exhibits</span>
            </div>
            <div class="step-item" style="cursor: pointer;" onclick="goToStepDirect(6)">
                <div class="step-circle">6</div>
                <span class="step-label">Review</span>
            </div>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 16.66%;"></div>
        </div>
    </div>

    <div class="content-wrapper">
        <!-- ============================================ -->
        <!-- STEP 1: Report Template Selection           -->
        <!-- COMPONENT: TemplateSelection                -->
        <!-- FUTURE: src/components/wizard/steps/TemplateSelection.tsx -->
        <!-- ============================================ -->
        <div class="page-section active" id="step-template" style="max-width: 1200px; margin: 0 auto; padding: 40px 24px 120px 24px;">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Select Report Template</h2>
            
            <p style="font-size: 15px; color: #687F8B; margin-bottom: 24px;">Choose a template that determines which sections and fields will appear in your final report. You can customize this later if needed.</p>

            <div style="background: #e3f2fd; border-left: 4px solid #1565c0; border-radius: 8px; padding: 20px; margin-bottom: 32px;">
                <div style="display: flex; align-items: start; gap: 12px;">
                    <i class="material-icons" style="color: #1565c0; font-size: 24px;">lightbulb</i>
                    <div>
                        <h4 style="font-size: 14px; font-weight: 700; color: #1565c0; margin-bottom: 8px;">What are report templates?</h4>
                        <p style="font-size: 13px; color: #1c3643; line-height: 1.6; margin: 0;">Report templates allow you to control what appears in your final PDF. Your administrator has created pre-configured templates for different scenarios (bank submissions, quick valuations, etc.). Select the one that best fits your needs.</p>
                    </div>
                </div>
            </div>

            <div class="template-grid">
                <!-- Templates will be dynamically rendered here based on property type -->
            </div>
        </div>

        <!-- ============================================ -->
        <!-- STEP 2: Evaluation Setup                    -->
        <!-- COMPONENT: SetupStep                        -->
        <!-- FUTURE: src/components/wizard/steps/SetupStep.tsx -->
        <!-- ============================================ -->
        <div class="page-section" id="step-setup" style="max-width: 1200px; margin: 0 auto; padding: 40px 24px 120px 24px;">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Evaluation Setup</h2>
            
            <div class="form-section">
                <div class="form-section-title">
                    <i class="material-icons">business</i>
                    Basic Information
                </div>
                
                <div class="form-group">
                    <label class="form-label">Evaluation Type<span class="required">*</span></label>
                    <select class="form-select" id="evaluationType">
                        <option value="">Select type</option>
                        <option value="commercial">Commercial</option>
                        <option value="residential">Residential</option>
                        <option value="land">Land</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Client<span class="required">*</span></label>
                    <input type="text" class="form-input" placeholder="Search for client..." />
                </div>
            </div>

            <div class="form-section">
                <div class="form-section-title">
                    <i class="material-icons">assessment</i>
                    Select Valuation Approaches
                </div>
                
                <p style="font-size: 14px; color: #687F8B; margin-bottom: 24px;">Choose all valuation methods you'll use for this evaluation. You can select multiple approaches.</p>

                <div class="approach-grid">
                    <div class="approach-card selected" onclick="toggleApproach(this)">
                        <div class="approach-checkbox"></div>
                        <div style="margin-top: 12px;">
                            <div style="font-size: 16px; font-weight: 700; color: #1c3643; margin-bottom: 6px;">Sales Comparison</div>
                            <div style="font-size: 13px; color: #687F8B;">Compare to similar sold properties</div>
                        </div>
                        <div style="position: absolute; top: 12px; right: 12px; background: #2e7d32; color: white; font-size: 10px; font-weight: 700; padding: 4px 8px; border-radius: 4px;">RECOMMENDED</div>
                    </div>

                    <div class="approach-card" onclick="toggleApproach(this)">
                        <div class="approach-checkbox"></div>
                        <div style="margin-top: 12px;">
                            <div style="font-size: 16px; font-weight: 700; color: #1c3643; margin-bottom: 6px;">Cost Approach</div>
                            <div style="font-size: 13px; color: #687F8B;">Replacement cost less depreciation</div>
                        </div>
                    </div>

                    <div class="approach-card" onclick="toggleApproach(this)">
                        <div class="approach-checkbox"></div>
                        <div style="margin-top: 12px;">
                            <div style="font-size: 16px; font-weight: 700; color: #1c3643; margin-bottom: 6px;">Income Approach</div>
                            <div style="font-size: 13px; color: #687F8B;">Based on income generation potential</div>
                        </div>
                    </div>

                    <div class="approach-card" onclick="toggleApproach(this)">
                        <div class="approach-checkbox"></div>
                        <div style="margin-top: 12px;">
                            <div style="font-size: 16px; font-weight: 700; color: #1c3643; margin-bottom: 6px;">Lease Comps</div>
                            <div style="font-size: 13px; color: #687F8B;">Compare to similar leased properties</div>
                        </div>
                    </div>

                    <div class="approach-card" onclick="toggleApproach(this)">
                        <div class="approach-checkbox"></div>
                        <div style="margin-top: 12px;">
                            <div style="font-size: 16px; font-weight: 700; color: #1c3643; margin-bottom: 6px;">Cap Rate Analysis</div>
                            <div style="font-size: 13px; color: #687F8B;">Capitalization rate valuation</div>
                        </div>
                    </div>

                    <div class="approach-card" onclick="toggleApproach(this)">
                        <div class="approach-checkbox"></div>
                        <div style="margin-top: 12px;">
                            <div style="font-size: 16px; font-weight: 700; color: #1c3643; margin-bottom: 6px;">Multi-Family</div>
                            <div style="font-size: 13px; color: #687F8B;">Multi-family property analysis</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- STEP 3: Overview (Property Details & Analysis) -->
        <!-- COMPONENT: OverviewStep                     -->
        <!-- FUTURE: src/components/wizard/steps/OverviewStep.tsx -->
        <!-- Sub-components:                             -->
        <!--   - PropertyDetails, Specifications, Analysis, -->
        <!--     Amenities, Zoning, Images, Photos, Maps, -->
        <!--     TaxAssessment, etc.                     -->
        <!-- ============================================ -->
        <div class="page-section" id="step-overview">
            <div class="overview-layout">
                <!-- Left Sidebar -->
                <div class="left-sidebar">
                    <div class="sidebar-item active" onclick="scrollToSection('property-details')">
                        <span>PROPERTY DETAILS</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                    <div class="sidebar-item" onclick="scrollToSection('specifications')">
                        <span>SPECIFICATIONS</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                    <div class="sidebar-item" onclick="scrollToSection('analysis')">
                        <span>ANALYSIS</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                    <div class="sidebar-item" onclick="scrollToSection('amenities')">
                        <span>AMENITIES</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                    <div class="sidebar-item" onclick="scrollToSection('zoning')">
                        <span>ZONING</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                    <div class="sidebar-item" onclick="scrollToSection('images')">
                        <span>IMAGES</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                    <div class="sidebar-item" onclick="scrollToSection('photos')">
                        <span>PHOTOS</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                    <div class="sidebar-item" onclick="scrollToSection('map-boundary')">
                        <span>MAP BOUNDARY</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                    <div class="sidebar-item" onclick="scrollToSection('aerial-map')">
                        <span>AERIAL MAP</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                    <div class="sidebar-item" onclick="scrollToSection('area-info')">
                        <span>AREA INFO</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                    <div class="sidebar-item" onclick="scrollToSection('tax-assessment')">
                        <span>TAX ASSESSMENT</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                    <div class="sidebar-item" onclick="scrollToSection('map-boundaries')">
                        <span>MAP BOUNDARIES</span>
                        <i class="material-icons sidebar-check">check_circle</i>
                    </div>
                </div>

                        <!-- Main Content -->
                        <div class="main-content">
                            <!-- Property Details Section -->
                            <div class="form-section" id="property-details" data-section="property-details">
                                <div class="form-section-title">
                                    <i class="material-icons">business</i>
                                    PROPERTY DETAILS
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 400px; gap: 24px;">
                                    <!-- Left Column - Form Fields -->
                                    <div>
                                        <div class="form-group">
                                            <label class="form-label">Report Title<span class="required">*</span></label>
                                            <input type="text" class="form-input" placeholder="Enter report title" value="As Stabilized" />
                                        </div>

                                        <div class="form-row">
                                            <div class="form-group">
                                                <label class="form-label">Street Address<span class="required">*</span></label>
                                                <input type="text" class="form-input" placeholder="Start typing address..." />
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Suite Number</label>
                                                <input type="text" class="form-input" placeholder="Suite/Unit #" />
                                            </div>
                                        </div>

                                        <div class="form-row">
                                            <div class="form-group">
                                                <label class="form-label">State<span class="required">*</span></label>
                                                <select class="form-select">
                                                    <option value="">Select state</option>
                                                    <option value="MT">Montana</option>
                                                    <option value="AL">Alabama</option>
                                                    <option value="AK">Alaska</option>
                                                    <option value="AZ">Arizona</option>
                                                    <!-- Add all states -->
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">City<span class="required">*</span></label>
                                                <input type="text" class="form-input" placeholder="City" />
                                            </div>
                                        </div>

                                        <div class="form-row">
                                            <div class="form-group">
                                                <label class="form-label">ZIP Code</label>
                                                <input type="text" class="form-input" placeholder="ZIP" />
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">County</label>
                                                <input type="text" class="form-input" placeholder="County" readonly />
                                            </div>
                                        </div>

                                        <div class="form-row">
                                            <div class="form-group">
                                                <label class="form-label">Type</label>
                                                <select class="form-select">
                                                    <option value="sale">Sale</option>
                                                    <option value="lease">Lease</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Under Contract Price</label>
                                                <input type="text" class="form-input" placeholder="$0.00" />
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Close Date</label>
                                            <input type="date" class="form-input" placeholder="MM/DD/YYYY" />
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Is last sale date known?</label>
                                            <div style="display: flex; gap: 12px;">
                                                <button type="button" class="btn-primary" style="flex: 1; padding: 10px 20px;" onclick="this.classList.add('active'); this.nextElementSibling.classList.remove('active');">YES</button>
                                                <button type="button" class="btn-secondary" style="flex: 1; padding: 10px 20px;" onclick="this.classList.add('active'); this.previousElementSibling.classList.remove('active');">NO</button>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Last Sale Date</label>
                                            <input type="date" class="form-input" placeholder="MM/DD/YYYY" />
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">APN / PARCEL ID / TAX ID</label>
                                            <input type="text" class="form-input" placeholder="Enter APN" />
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Owner of Record</label>
                                            <textarea class="form-textarea" placeholder="Enter owner information"></textarea>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Property Geocode</label>
                                            <input type="text" class="form-input" placeholder="Enter geocode" />
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Property Legal</label>
                                            <textarea class="form-textarea" placeholder="Enter legal description"></textarea>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Property Rights</label>
                                            <select class="form-select">
                                                <option value="">Select property rights</option>
                                                <option value="fee_simple">Fee Simple</option>
                                                <option value="leasehold">Leasehold</option>
                                                <option value="leased_fee">Leased Fee</option>
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">File #</label>
                                            <input type="text" class="form-input" placeholder="File number" />
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Report Intended Use</label>
                                            <textarea class="form-textarea" placeholder="Enter intended use" style="min-height: 80px;"></textarea>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Intended User(s)</label>
                                            <input type="text" class="form-input" placeholder="Enter intended users" />
                                        </div>
                                    </div>

                                    <!-- Right Column - Map -->
                                    <div style="position: sticky; top: 200px; height: fit-content;">
                                        <div style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; overflow: hidden;">
                                            <div style="display: flex; gap: 8px; padding: 8px; background: #f9f9f9; border-bottom: 1px solid #e0e0e0;">
                                                <button class="btn-secondary" style="padding: 8px 16px; font-size: 12px;">Map</button>
                                                <button class="btn-primary" style="padding: 8px 16px; font-size: 12px;">Satellite</button>
                                            </div>
                                            <div style="width: 100%; height: 400px; background: #e0e0e0; display: flex; align-items: center; justify-content: center; color: #687F8B;">
                                                <div style="text-align: center;">
                                                    <i class="material-icons" style="font-size: 48px; opacity: 0.5;">map</i>
                                                    <div style="margin-top: 8px;">Google Maps will display here</div>
                                                </div>
                                            </div>
                                            <div style="padding: 12px; background: #f9f9f9; border-top: 1px solid #e0e0e0;">
                                                <button class="btn-primary" style="width: 100%; padding: 10px;">
                                                    <i class="material-icons" style="font-size: 16px;">my_location</i>
                                                    Set Location
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Specifications Section -->
                            <div class="form-section" id="specifications" data-section="specifications">
                                <div class="form-section-title">
                                    <i class="material-icons">domain</i>
                                    SPECIFICATIONS
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Property Class</label>
                                        <select class="form-select">
                                            <option value="">Select class</option>
                                            <option value="A">Class A</option>
                                            <option value="B">Class B</option>
                                            <option value="C">Class C</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Condition</label>
                                        <select class="form-select">
                                            <option value="">Select condition</option>
                                            <option value="excellent">Excellent</option>
                                            <option value="good">Good</option>
                                            <option value="fair">Fair</option>
                                            <option value="poor">Poor</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Year Built</label>
                                        <input type="text" class="form-input" placeholder="YYYY" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Year Remodeled</label>
                                        <input type="text" class="form-input" placeholder="YYYY" />
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Building Size (SF)</label>
                                        <input type="text" class="form-input" placeholder="Square feet" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Land Size (SF/AC)</label>
                                        <input type="text" class="form-input" placeholder="Enter size" />
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Number of Stories</label>
                                        <input type="text" class="form-input" placeholder="# of stories" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Parking Spaces</label>
                                        <input type="text" class="form-input" placeholder="# of spaces" />
                                    </div>
                                </div>
                            </div>

                            <!-- Analysis Section -->
                            <div class="form-section" id="analysis" data-section="analysis">
                                <div class="form-section-title">
                                    <i class="material-icons">analytics</i>
                                    ANALYSIS
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">High and Best Use</label>
                                    <textarea class="form-textarea" placeholder="Describe highest and best use"></textarea>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Intended Use</label>
                                    <textarea class="form-textarea" placeholder="Describe intended use"></textarea>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Date of Analysis</label>
                                        <input type="date" class="form-input" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Inspector Name</label>
                                        <input type="text" class="form-input" placeholder="Name" />
                                    </div>
                                </div>
                            </div>

                            <!-- Amenities Section -->
                            <div class="form-section" id="amenities" data-section="amenities">
                                <div class="form-section-title">
                                    <i class="material-icons">star</i>
                                    AMENITIES
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Additional Features</label>
                                    
                                    <!-- Search Bar -->
                                    <div class="amenities-search-container">
                                        <i class="material-icons amenities-search-icon">search</i>
                                        <input 
                                            type="text" 
                                            class="amenities-search-input" 
                                            id="amenitiesSearch"
                                            placeholder="Search amenities..." 
                                        />
                                    </div>
                                    
                                    <!-- Hidden input to store selected amenities -->
                                    <input type="hidden" id="selectedAmenitiesInput" name="additional_features" value="" />
                                    
                                    <!-- Category Columns -->
                                    <div class="amenities-categories-grid">
                                        <!-- Outdoor Column -->
                                        <div class="amenities-category-column">
                                            <div class="amenities-category-header outdoor">
                                                <i class="material-icons" style="font-size: 14px;">deck</i>
                                                Outdoor
                                            </div>
                                            <div class="amenities-chips">
                                                <div class="amenity-chip outdoor" data-amenity="Swimming Pool" data-category="outdoor">
                                                    <span>Swimming Pool</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip outdoor" data-amenity="Hot Tub" data-category="outdoor">
                                                    <span>Hot Tub</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip outdoor" data-amenity="Outdoor Kitchen" data-category="outdoor">
                                                    <span>Outdoor Kitchen</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip outdoor" data-amenity="Basketball Court" data-category="outdoor">
                                                    <span>Basketball Court</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip outdoor" data-amenity="Gazebo/Pergola" data-category="outdoor">
                                                    <span>Gazebo/Pergola</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip outdoor" data-amenity="Outdoor Fireplace/Fire Pit" data-category="outdoor">
                                                    <span>Outdoor Fireplace/Fire Pit</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip outdoor" data-amenity="Fence (Privacy)" data-category="outdoor">
                                                    <span>Fence (Privacy)</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip outdoor" data-amenity="Deck (Covered)" data-category="outdoor">
                                                    <span>Deck (Covered)</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip outdoor" data-amenity="Patio (Covered)" data-category="outdoor">
                                                    <span>Patio (Covered)</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip outdoor" data-amenity="Landscaping" data-category="outdoor">
                                                    <span>Landscaping</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip outdoor" data-amenity="Sprinkler System" data-category="outdoor">
                                                    <span>Sprinkler System</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Indoor Column -->
                                        <div class="amenities-category-column">
                                            <div class="amenities-category-header indoor">
                                                <i class="material-icons" style="font-size: 14px;">home</i>
                                                Indoor
                                            </div>
                                            <div class="amenities-chips">
                                                <div class="amenity-chip indoor" data-amenity="Home Theater Room" data-category="indoor">
                                                    <span>Home Theater Room</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip indoor" data-amenity="Sauna/Steam Room" data-category="indoor">
                                                    <span>Sauna/Steam Room</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip indoor" data-amenity="Wine Cellar" data-category="indoor">
                                                    <span>Wine Cellar</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip indoor" data-amenity="Workshop/Hobby Room" data-category="indoor">
                                                    <span>Workshop/Hobby Room</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip indoor" data-amenity="Security System" data-category="indoor">
                                                    <span>Security System</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip indoor" data-amenity="Central Vacuum" data-category="indoor">
                                                    <span>Central Vacuum</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip indoor" data-amenity="Smart Home System" data-category="indoor">
                                                    <span>Smart Home System</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip indoor" data-amenity="Built-in Shelving" data-category="indoor">
                                                    <span>Built-in Shelving</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Utilities Column -->
                                        <div class="amenities-category-column">
                                            <div class="amenities-category-header utilities">
                                                <i class="material-icons" style="font-size: 14px;">electrical_services</i>
                                                Utilities
                                            </div>
                                            <div class="amenities-chips">
                                                <div class="amenity-chip utilities" data-amenity="Central Air" data-category="utilities">
                                                    <span>Central Air</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip utilities" data-amenity="Natural Gas" data-category="utilities">
                                                    <span>Natural Gas</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip utilities" data-amenity="Well Water" data-category="utilities">
                                                    <span>Well Water</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip utilities" data-amenity="Septic System" data-category="utilities">
                                                    <span>Septic System</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip utilities" data-amenity="Generator" data-category="utilities">
                                                    <span>Generator</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                                <div class="amenity-chip utilities" data-amenity="Solar Panels" data-category="utilities">
                                                    <span>Solar Panels</span>
                                                    <i class="material-icons amenity-checkmark">check_circle</i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Key Highlights</label>
                                    <textarea class="form-textarea" placeholder="Key selling points"></textarea>
                                </div>
                            </div>

                            <!-- Zoning Section -->
                            <div class="form-section" id="zoning" data-section="zoning">
                                <div class="form-section-title">
                                    <i class="material-icons">location_city</i>
                                    ZONING
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Zoning Type</label>
                                        <input type="text" class="form-input" placeholder="e.g., C-2, R-1" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Zoning Classification</label>
                                        <select class="form-select">
                                            <option value="">Select classification</option>
                                            <option value="commercial">Commercial</option>
                                            <option value="residential">Residential</option>
                                            <option value="industrial">Industrial</option>
                                            <option value="mixed">Mixed Use</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Zoning Description</label>
                                    <textarea class="form-textarea" placeholder="Describe zoning details"></textarea>
                                </div>
                            </div>

                            <!-- Images Section -->
                            <div class="form-section" id="images" data-section="images">
                                <div class="form-section-title">
                                    <i class="material-icons">collections</i>
                                    IMAGES
                                </div>
                                
                                <div class="info-box">
                                    <div class="info-box-title">Image Requirements</div>
                                    <div class="info-box-text">
                                        <strong>FOR BEST RESULTS, WE RECOMMEND PHOTO SIZE TO BE BETWEEN 2MB - 5MB, IF POSSIBLE.</strong><br><br>
                                        <strong>Photos Needed:</strong><br>
                                        • Cover Photo: Main property image (horizontal orientation preferred)<br>
                                        • Table of Contents: Secondary property view (any orientation)<br>
                                        • Executive Summary: Professional exterior shot (horizontal)<br>
                                        • Property Summary: Additional view or detail shot (any orientation)<br><br>
                                        These images will appear in your final PDF report in high quality.
                                    </div>
                                </div>

                                <div class="drag-drop-zone" onclick="document.getElementById('imageUpload').click()">
                                    <div class="drag-drop-icon">
                                        <i class="material-icons" style="font-size: 48px;">cloud_upload</i>
                                    </div>
                                    <div class="drag-drop-text">Drag images here or click to upload</div>
                                    <div class="drag-drop-hint">Multiple files supported • 2MB - 5MB recommended</div>
                                    <input type="file" id="imageUpload" multiple accept="image/*" style="display: none;" />
                                </div>

                                <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; margin-top: 20px;">
                                    <thead>
                                        <tr style="border-bottom: 2px solid #e0e0e0;">
                                            <th style="padding: 12px; text-align: left; font-size: 13px; font-weight: 600; color: #687F8B;">Image</th>
                                            <th style="padding: 12px; text-align: left; font-size: 13px; font-weight: 600; color: #687F8B;">Description</th>
                                            <th style="padding: 12px; text-align: left; font-size: 13px; font-weight: 600; color: #687F8B;">Orientation</th>
                                            <th style="padding: 12px; text-align: left; font-size: 13px; font-weight: 600; color: #687F8B;">Page</th>
                                            <th style="padding: 12px; text-align: left; font-size: 13px; font-weight: 600; color: #687F8B;">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr style="border-bottom: 1px solid #e0e0e0;">
                                            <td style="padding: 12px;">
                                                <div style="width: 60px; height: 60px; background: #f5f5f5; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                                                    <i class="material-icons" style="color: #e0e0e0;">image</i>
                                                </div>
                                            </td>
                                            <td style="padding: 12px;">
                                                <input type="text" class="form-input" value="Sub. Property 1" />
                                            </td>
                                            <td style="padding: 12px;">
                                                <select class="form-select">
                                                    <option value="horizontal">Horizontal</option>
                                                    <option value="vertical">Vertical</option>
                                                </select>
                                            </td>
                                            <td style="padding: 12px;">
                                                <select class="form-select">
                                                    <option value="1">1 - Cover Photo</option>
                                                    <option value="2">2 - Table of Contents</option>
                                                    <option value="5">5 - Executive Summary</option>
                                                    <option value="7">7 - Property Summary</option>
                                                </select>
                                            </td>
                                            <td style="padding: 12px;">
                                                <button style="background: none; border: none; cursor: pointer; color: #dc3545;">
                                                    <i class="material-icons">delete</i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Photos Section -->
                            <div class="form-section" id="photos" data-section="photos">
                                <div class="form-section-title">
                                    <i class="material-icons">photo_library</i>
                                    PHOTOS
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Photo Taken By<span class="required">*</span></label>
                                        <input type="text" class="form-input" placeholder="Photographer name" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Photo Date<span class="required">*</span></label>
                                        <input type="date" class="form-input" />
                                    </div>
                                </div>

                                <div class="drag-drop-zone" onclick="document.getElementById('photoUpload').click()">
                                    <div class="drag-drop-icon">
                                        <i class="material-icons" style="font-size: 48px;">add_photo_alternate</i>
                                    </div>
                                    <div class="drag-drop-text">Drag photos here or click to upload</div>
                                    <div class="drag-drop-hint">Multiple files supported • JPG, PNG accepted</div>
                                    <input type="file" id="photoUpload" multiple accept="image/*" style="display: none;" />
                                </div>

                                <div id="photoGrid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-top: 24px;">
                                    <!-- Uploaded photos will appear here -->
                                </div>
                            </div>

                            <!-- Map Boundary Section -->
                            <div class="form-section" id="map-boundary" data-section="map-boundary">
                                <div class="form-section-title">
                                    <i class="material-icons">edit_location</i>
                                    MAP BOUNDARY
                                </div>

                                <div class="info-box">
                                    <div class="info-box-title">Select the boundaries of the property</div>
                                    <div class="info-box-text">
                                        Click to place boundary points, drag to adjust vertices. Use the drawing tools to create the property boundary.
                                    </div>
                                </div>

                                <div class="map-container">
                                    <div class="map-tools">
                                        <button class="map-tool-btn active" data-tooltip="Polygon Tool">
                                            <i class="material-icons">pentagon</i>
                                        </button>
                                        <button class="map-tool-btn" data-tooltip="Rectangle Tool">
                                            <i class="material-icons">crop_square</i>
                                        </button>
                                        <button class="map-tool-btn" data-tooltip="Circle Tool">
                                            <i class="material-icons">circle</i>
                                        </button>
                                        <div style="height: 1px; background: #e0e0e0; margin: 8px 0;"></div>
                                        <button class="map-tool-btn" data-tooltip="Undo">
                                            <i class="material-icons">undo</i>
                                        </button>
                                        <button class="map-tool-btn" data-tooltip="Redo">
                                            <i class="material-icons">redo</i>
                                        </button>
                                        <button class="map-tool-btn" data-tooltip="Clear All" style="color: #dc3545;">
                                            <i class="material-icons">delete</i>
                                        </button>
                                    </div>
                                    
                                    <div style="position: absolute; top: 16px; right: 16px; background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); padding: 8px;">
                                        <button class="btn-secondary" style="padding: 8px 16px; margin-right: 8px;">Map</button>
                                        <button class="btn-primary" style="padding: 8px 16px;">Satellite</button>
                                    </div>

                                    <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: #687F8B;">
                                        [Interactive Map View - Auto-saves on change]
                                    </div>
                                </div>
                            </div>

                            <!-- Aerial Map Section -->
                            <div class="form-section" id="aerial-map" data-section="aerial-map">
                                <div class="form-section-title">
                                    <i class="material-icons">satellite</i>
                                    AERIAL MAP
                                </div>

                                <div class="info-box">
                                    <div class="info-box-title">Set the aerial map view for PDF display</div>
                                    <div class="info-box-text">
                                        Zoom and orient the map as it should appear in your final report. The view saves automatically.
                                    </div>
                                </div>

                                <div class="map-container">
                                    <div style="position: absolute; top: 16px; right: 16px; background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); padding: 8px;">
                                        <button class="btn-secondary" style="padding: 8px 16px; margin-right: 8px;">Map</button>
                                        <button class="btn-primary" style="padding: 8px 16px;">Hybrid</button>
                                    </div>

                                    <div style="position: absolute; bottom: 16px; left: 50%; transform: translateX(-50%); background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); padding: 12px 20px;">
                                        <div style="font-size: 12px; color: #687F8B; margin-bottom: 4px;">Auto-saving view position</div>
                                        <div style="font-size: 13px; color: #1c3643; font-weight: 600;">Zoom: 16 • Center: 40.7128° N, 74.0060° W</div>
                                    </div>

                                    <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: #687F8B;">
                                        [Interactive Aerial Map View]
                                    </div>
                                </div>
                            </div>

                            <!-- Area Info Section -->
                            <div class="form-section" id="area-info" data-section="area-info">
                                <div class="form-section-title">
                                    <i class="material-icons">location_on</i>
                                    AREA INFO
                                </div>

                                <div style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; padding: 24px; margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                        <label class="form-label" style="margin-bottom: 0;">City Info (1200 characters max)</label>
                                        <button class="btn-ai">
                                            <span>✨</span>
                                            Generate with AI
                                        </button>
                                    </div>

                                    <textarea class="form-textarea" id="cityInfo" placeholder="Enter city information or use AI to generate..." style="min-height: 120px;"></textarea>
                                    <div class="char-counter" id="cityCharCount">0/1200 characters</div>
                                </div>

                                <div style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; padding: 24px; margin-bottom: 20px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                                        <label class="form-label" style="margin-bottom: 0;">County Info (1200 characters max)</label>
                                        <button class="btn-ai">
                                            <span>✨</span>
                                            Generate with AI
                                        </button>
                                    </div>

                                    <textarea class="form-textarea" id="countyInfo" placeholder="Enter county information or use AI to generate..." style="min-height: 120px;"></textarea>
                                    <div class="char-counter" id="countyCharCount">0/1200 characters</div>
                                </div>

                                <div style="background: white; border: 1px solid #e0e0e0; border-radius: 8px; padding: 24px;">
                                    <div class="form-section-title" style="margin-bottom: 16px;">
                                        <i class="material-icons">trending_up</i>
                                        Market Trends
                                    </div>

                                    <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px; margin-bottom: 16px;">
                                        <div class="form-group">
                                            <label class="form-label">Sales</label>
                                            <select class="form-select">
                                                <option value="up">↑ Up</option>
                                                <option value="down">↓ Down</option>
                                                <option value="stable">→ Stable</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Vacancy</label>
                                            <select class="form-select">
                                                <option value="up">↑ Up</option>
                                                <option value="down">↓ Down</option>
                                                <option value="stable">→ Stable</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Absorption</label>
                                            <select class="form-select">
                                                <option value="up">↑ Up</option>
                                                <option value="down">↓ Down</option>
                                                <option value="stable">→ Stable</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Construction</label>
                                            <select class="form-select">
                                                <option value="up">↑ Up</option>
                                                <option value="down">↓ Down</option>
                                                <option value="stable">→ Stable</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Lease Rates</label>
                                            <select class="form-select">
                                                <option value="up">↑ Up</option>
                                                <option value="down">↓ Down</option>
                                                <option value="stable">→ Stable</option>
                                            </select>
                                        </div>
                                    </div>

                                    <button class="btn-ai">
                                        <span>✨</span>
                                        AI Analyze Trends
                                    </button>
                                </div>
                            </div>

                            <!-- Tax Assessment Section -->
                            <div class="form-section" id="tax-assessment" data-section="tax-assessment">
                                <div class="form-section-title">
                                    <i class="material-icons">receipt_long</i>
                                    TAX ASSESSMENT
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Land Value</label>
                                        <input type="text" class="form-input" placeholder="$" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Improvement Value</label>
                                        <input type="text" class="form-input" placeholder="$" />
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Assessment Year</label>
                                        <input type="text" class="form-input" placeholder="YYYY" />
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Annual Tax Amount</label>
                                        <input type="text" class="form-input" placeholder="$" />
                                    </div>
                                </div>
                            </div>

                            <!-- Map Boundaries Section -->
                            <div class="form-section" id="map-boundaries" data-section="map-boundaries">
                                <div class="form-section-title">
                                    <i class="material-icons">map</i>
                                    MAP BOUNDARIES
                                </div>
                                
                                <div style="margin-bottom: 24px;">
                                    <h4 style="font-size: 14px; font-weight: 600; color: #1c3643; margin-bottom: 16px;">
                                        Traffic Counts - <span style="font-weight: 400;">Numbers based on the average daily traffic (ADT)</span>
                                    </h4>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label class="form-label">Street Address</label>
                                            <input type="text" class="form-input" placeholder="Enter street address" />
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Traffic Count (ADT)</label>
                                            <select class="form-select" id="trafficCountADT">
                                                <option value="">-- Select Traffic Count (ADT) Option --</option>
                                                <option value="input">Input a Value</option>
                                                <option value="under_2500">Under 2,500</option>
                                                <option value="unknown">Unknown</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <button class="btn-primary" onclick="scrollToSection('map-boundary')">
                                    <i class="material-icons">edit</i>
                                    Edit Boundary
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- STEP: Sales Comparison Approach             -->
        <!-- NOTE: Only shown if "Sales" selected in Setup -->
        <!-- COMPONENT: SalesApproachStep                -->
        <!-- FUTURE: src/components/wizard/steps/SalesApproachStep.tsx -->
        <!-- 4-PANEL LAYOUT: Field List | Subject | Comps 1-4 | Totals -->
        <!-- ============================================ -->
        <div class="page-section" id="step-sales-approach">
            <!-- Action Buttons (above all panels) -->
            <div style="padding: 20px 24px; background: white; display: flex; gap: 12px; border-bottom: 1px solid #e0e0e0;">
                <button class="btn-sales-action primary" onclick="openLinkCompsModal()">
                    <i class="material-icons">link</i>
                    Link Existing Comp
                </button>
                <button class="btn-sales-action" onclick="openAddCompModal()">
                    <i class="material-icons">add</i>
                    Add New Comp
                </button>
                <button class="btn-sales-action" onclick="openUploadCompsModal()">
                    <i class="material-icons">upload</i>
                    Upload Comp
                </button>
            </div>

            <div class="sales-approach-layout">
                <!-- PANEL 1: FIELD LIST (Far Left, 200px) -->
                <div class="field-list-panel">
                    <h3 style="font-size: 16px; font-weight: 700; color: #1c3643; margin-bottom: 20px;">Sales Approach</h3>
                    
                    <!-- Approach Value Display -->
                    <div style="background: #e8f5f7; border-radius: 8px; padding: 16px; margin-bottom: 20px;">
                        <div style="font-size: 11px; color: #687F8B; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">SALES VALUE</div>
                        <div style="font-size: 28px; font-weight: 700; color: #0da1c7; margin-bottom: 4px;">$1,002,529</div>
                        <div style="font-size: 13px; color: #687F8B;">$403/SF</div>
                        
                        <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #d0e8ed;">
                            <label style="font-size: 12px; color: #687F8B; display: block; margin-bottom: 6px;">Weight</label>
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <input type="range" min="0" max="100" value="50" style="flex: 1;" onchange="this.nextElementSibling.textContent = this.value + '%'">
                                <span style="font-weight: 700; color: #1c3643; min-width: 45px;">50%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Value Breakdown -->
                    <div style="background: #f9fafb; border-radius: 8px; padding: 16px; margin-bottom: 20px;">
                        <h4 style="font-size: 12px; font-weight: 700; color: #687F8B; text-transform: uppercase; margin-bottom: 12px;">Value Breakdown</h4>
                        <div style="font-size: 12px; color: #1c3643; line-height: 1.8;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
                                <span style="color: #687F8B;">Averaged Adj PSF:</span>
                                <strong>$403.27</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
                                <span style="color: #687F8B;">Weighting:</span>
                                <strong>100.00%</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
                                <span style="color: #687F8B;">Comp Adjustments:</span>
                                <strong>0.00%</strong>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding-top: 12px; border-top: 1px solid #e0e0e0; margin-top: 12px;">
                                <span style="color: #687F8B;">Total Sales Value:</span>
                                <strong style="color: #2e7d32;">$1,002,529</strong>
                            </div>
                        </div>
                    </div>

                    <!-- Approach Notes -->
                    <div>
                        <label style="font-size: 12px; font-weight: 700; color: #687F8B; text-transform: uppercase; display: block; margin-bottom: 8px;">Approach Notes</label>
                        <textarea placeholder="Enter sales approach notes..." rows="4" style="width: 100%; padding: 10px; border: 1px solid #e0e0e0; border-radius: 4px; font-size: 13px; resize: vertical;"></textarea>
                    </div>
                </div>

                <!-- MAIN CONTENT AREA -->
                <div class="sales-main-content">
                    <!-- Action Buttons -->
                    <div class="sales-actions-top">
                        <button class="btn-sales-action primary" onclick="openLinkCompsModal()">
                            <i class="material-icons">link</i>
                            Link Existing Comp
                        </button>
                        <button class="btn-sales-action" onclick="openAddCompModal()">
                            <i class="material-icons">add</i>
                            Add New Comp
                        </button>
                        <button class="btn-sales-action" onclick="openUploadCompsModal()">
                            <i class="material-icons">upload</i>
                            Upload Comp
                        </button>
                    </div>

                    <!-- Add Field Button -->
                    <div style="display: flex; justify-content: flex-start;">
                        <button onclick="openFieldSelector()" style="padding: 10px 20px; background: white; border: 2px solid #0da1c7; border-radius: 6px; color: #0da1c7; font-size: 13px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: all 0.2s;">
                            <i class="material-icons" style="font-size: 18px;">add</i>
                            Add Comparison Field
                        </button>
                    </div>

                    <!-- Comparison Table -->
                <div class="comparison-table-wrapper">
                    <table class="comparison-table" id="comparisonTable">
                        <thead>
                            <tr>
                                <th class="subject-column">Subject Property</th>
                                <th class="comp-column" id="comp-header-1">Comp 1</th>
                                <th class="comp-column" id="comp-header-2">Comp 2</th>
                                <th class="comp-column" id="comp-header-3">Comp 3</th>
                                <th class="comp-column" id="comp-header-4">Comp 4</th>
                            </tr>
                        </thead>
                        <tbody id="comparisonTableBody">
                            <!-- Image Row -->
                            <tr>
                                <td class="subject-column property-image-cell">
                                    <img src="https://via.placeholder.com/240x140?text=Subject+Property" alt="Subject Property">
                                </td>
                                <td class="comp-column property-image-cell">
                                    <img src="https://via.placeholder.com/280x140?text=500+Resource+Lane" alt="Comp 1">
                                </td>
                                <td class="comp-column property-image-cell">
                                    <img src="https://via.placeholder.com/280x140?text=317+East+4th+Street" alt="Comp 2">
                                </td>
                                <td class="comp-column property-image-cell">
                                    <img src="https://via.placeholder.com/280x140?text=229+South+6th+Street" alt="Comp 3">
                                </td>
                                <td class="comp-column property-image-cell">
                                    <img src="https://via.placeholder.com/280x140?text=Gallatin+Road" alt="Comp 4">
                                </td>
                            </tr>

                            <!-- Location Row -->
                            <tr>
                                <td class="subject-column field-label-row">Location</td>
                                <td class="comp-column comp-value-cell">3752 Valley Drive<br>Helena, MT, 59602</td>
                                <td class="comp-column comp-value-cell">500 Resource Lane<br>Whitefish, MT, 59937</td>
                                <td class="comp-column comp-value-cell">317 East 4th Street (Active)<br>Dell Rapids, SD, 57022</td>
                                <td class="comp-column comp-value-cell">229 South 6th Street (Active)<br>Missouri Valley, IA, 51555</td>
                            </tr>

                            <!-- Date Sold Row -->
                            <tr>
                                <td class="subject-column field-label-row">Date Sold</td>
                                <td class="comp-column comp-value-cell">-</td>
                                <td class="comp-column comp-value-cell">02/01/2030</td>
                                <td class="comp-column comp-value-cell">01/01/2022</td>
                                <td class="comp-column comp-value-cell">01/01/2022</td>
                            </tr>

                            <!-- Property Type Row -->
                            <tr>
                                <td class="subject-column field-label-row">Property Type</td>
                                <td class="comp-column comp-value-cell">Multi-Family / 2-4 Units</td>
                                <td class="comp-column comp-value-cell">Industrial / Manufacturing</td>
                                <td class="comp-column comp-value-cell">Office / Bank</td>
                                <td class="comp-column comp-value-cell">Retail / Restaurant</td>
                            </tr>

                            <!-- Dynamic Comparison Fields (with controls in subject column) -->
                            <tr id="field-row-sales-price">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="sales_price">Sales Price</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-sales-price')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                        <button class="btn-add-instance" onclick="addTableFieldInstance('sales_price')" title="Add another instance">
                                            <i class="material-icons">add</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column comp-value-cell">$1,300,000.00</td>
                                <td class="comp-column comp-value-cell">$700,000.00</td>
                                <td class="comp-column comp-value-cell">$165,000.00</td>
                                <td class="comp-column comp-value-cell">$3,999,000.00</td>
                            </tr>

                            <tr id="field-row-building-land">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="building_land">Building Size / Land Area</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-building-land')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                        <button class="btn-add-instance" onclick="addTableFieldInstance('building_land')" title="Add another instance">
                                            <i class="material-icons">add</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column comp-value-cell">2,486 SF / 8,490 AC</td>
                                <td class="comp-column comp-value-cell">12,000 SF / 3.500 AC</td>
                                <td class="comp-column comp-value-cell">9,283 SF / 0.230 AC</td>
                                <td class="comp-column comp-value-cell">11,158 SF / 0.975 AC</td>
                            </tr>

                            <tr id="field-row-year-built">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="year_built">Year Built / Remodeled</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-year-built')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column comp-value-cell">1971, 1992 / N/A</td>
                                <td class="comp-column comp-value-cell">2004 / N/A</td>
                                <td class="comp-column comp-value-cell">1976 / N/A</td>
                                <td class="comp-column comp-value-cell">1970 / N/A</td>
                            </tr>

                            <tr id="field-row-quality-condition">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="quality_condition">Quality / Condition</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-quality-condition')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column comp-value-cell">Average</td>
                                <td class="comp-column comp-value-cell">Good</td>
                                <td class="comp-column comp-value-cell">Good</td>
                                <td class="comp-column comp-value-cell">Average</td>
                            </tr>

                            <tr id="field-row-zoning">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="zoning">Zoning</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-zoning')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                        <button class="btn-add-instance" onclick="addTableFieldInstance('zoning')" title="Add another instance">
                                            <i class="material-icons">add</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column comp-value-cell">SR - Suburban Residential Mixed-use</td>
                                <td class="comp-column comp-value-cell">N/A</td>
                                <td class="comp-column comp-value-cell">N/A</td>
                                <td class="comp-column comp-value-cell">N/A</td>
                            </tr>

                            <tr id="field-row-building-psf">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="building_psf">Building $/SF</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-building-psf')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                        <button class="info-icon-btn" title="Price per square foot">
                                            <i class="material-icons">info</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column comp-value-cell">2,486 SF</td>
                                <td class="comp-column comp-value-cell">$108.33</td>
                                <td class="comp-column comp-value-cell">$75.41</td>
                                <td class="comp-column comp-value-cell">$14.79</td>
                            </tr>

                            <!-- Adjustment Rows -->
                            <tr id="field-row-condition">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="condition">Condition</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-condition')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                            <option value="5">5%</option>
                                            <option value="10">10%</option>
                                            <option value="-5">-5%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                            <option value="greater">Greater</option>
                                            <option value="less">Less</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>

                            <!-- More Adjustment Rows -->
                            <tr id="field-row-construction">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="construction">Construction</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-construction')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>

                            <tr id="field-row-economies-scale">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="economies_of_scale">Economies of Scale</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-economies-scale')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>

                            <tr id="field-row-location-adj-2">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="location">Location</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-location-adj-2')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                        <button class="btn-add-instance" onclick="addTableFieldInstance('location')" title="Add another instance">
                                            <i class="material-icons">add</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>

                            <tr id="field-row-time-2">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="time">Time</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-time-2')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>

                            <tr id="field-row-type-use-2">
                                <td class="subject-column">
                                    <div class="field-with-controls">
                                        <select class="field-name-dropdown">
                                            <option value="type_use">Type/Use</option>
                                        </select>
                                        <button class="btn-remove-field" onclick="removeTableField('field-row-type-use-2')" title="Remove field">
                                            <i class="material-icons">close</i>
                                        </button>
                                        <button class="btn-add-instance" onclick="addTableFieldInstance('type_use')" title="Add another instance">
                                            <i class="material-icons">add</i>
                                        </button>
                                        <button class="info-icon-btn" title="Property type and use classification">
                                            <i class="material-icons">info</i>
                                        </button>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                                <td class="comp-column">
                                    <div class="adjustment-cell">
                                        <select class="adj-percent-select">
                                            <option value="0">0%</option>
                                        </select>
                                        <select class="adj-comparison-select">
                                            <option value="equal">Equal</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>

                            <!-- Summary Rows (at bottom) -->
                            <tr class="summary-row">
                                <td class="subject-column">Notes</td>
                                <td class="comp-column"><a href="#" class="notes-link">Click to Enter Property Notes</a></td>
                                <td class="comp-column"><a href="#" class="notes-link">Click to add adjustment notes</a></td>
                                <td class="comp-column"><a href="#" class="notes-link">Click to add adjustment notes</a></td>
                                <td class="comp-column"><a href="#" class="notes-link">Click to add adjustment notes</a></td>
                            </tr>

                            <tr class="summary-row">
                                <td class="subject-column"><em>Overall Comparability</em></td>
                                <td class="comp-column"></td>
                                <td class="comp-column">
                                    <select style="width: 100%; padding: 6px; border: 1px solid #e0e0e0; border-radius: 4px; font-size: 12px;">
                                        <option>Similar</option>
                                        <option>Very Similar</option>
                                        <option>Somewhat Similar</option>
                                    </select>
                                </td>
                                <td class="comp-column">
                                    <select style="width: 100%; padding: 6px; border: 1px solid #e0e0e0; border-radius: 4px; font-size: 12px;">
                                        <option>Similar</option>
                                    </select>
                                </td>
                                <td class="comp-column">
                                    <select style="width: 100%; padding: 6px; border: 1px solid #e0e0e0; border-radius: 4px; font-size: 12px;">
                                        <option>Similar</option>
                                    </select>
                                </td>
                            </tr>

                            <tr class="summary-row">
                                <td class="subject-column"><em>Overall Adjustment</em></td>
                                <td class="comp-column"></td>
                                <td class="comp-column">0.00%</td>
                                <td class="comp-column">0.00%</td>
                                <td class="comp-column">0.00%</td>
                            </tr>

                            <tr class="summary-row">
                                <td class="subject-column"><em>Adjusted Price Per SF</em></td>
                                <td class="comp-column">100.00%</td>
                                <td class="comp-column">$108.33</td>
                                <td class="comp-column">$75.41</td>
                                <td class="comp-column">$14.79</td>
                            </tr>

                            <tr class="summary-row">
                                <td class="subject-column"><em>Weighting</em></td>
                                <td class="comp-column">$403.27 / SF</td>
                                <td class="comp-column">25%</td>
                                <td class="comp-column">25%</td>
                                <td class="comp-column">25%</td>
                            </tr>

                            <tr class="summary-row">
                                <td class="subject-column"><em>Sales Value $/SF</em></td>
                                <td class="comp-column"></td>
                                <td class="comp-column"></td>
                                <td class="comp-column"></td>
                                <td class="comp-column"></td>
                            </tr>

                            <tr class="total-value-row">
                                <td class="subject-column">TOTAL SALES VALUE</td>
                                <td class="comp-column total-value-amount" colspan="4">$1,002,529.22</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- End Comparison Table Wrapper -->
                </div>
                <!-- End Sales Main Content -->
            </div>
            <!-- End Sales Approach Layout -->
        </div>
        <!-- End Step Sales Approach -->

        <!-- Field Selector Modal -->
        <div class="field-selector-modal" id="fieldSelectorModal">
            <div class="field-selector-content">
                <div class="field-selector-header">
                    <h3>Add Comparison Field</h3>
                    <button class="btn-close-modal" onclick="closeFieldSelector()">×</button>
                </div>
                <div class="field-selector-body">
                    <input type="text" 
                           class="field-search" 
                           placeholder="Search fields..." 
                           onkeyup="filterFieldOptions(this.value)">
                    
                    <div class="field-category">
                        <h4>Property Basics</h4>
                        <div class="field-option" onclick="addComparisonField('location', true)">
                            <span>Location</span>
                            <span class="supports-multiple">⊕ Supports Multiple</span>
                        </div>
                        <div class="field-option" onclick="addComparisonField('building_size', false)">
                            <span>Building Size</span>
                        </div>
                        <div class="field-option" onclick="addComparisonField('land_size', false)">
                            <span>Land Size</span>
                        </div>
                        <div class="field-option" onclick="addComparisonField('property_class', false)">
                            <span>Property Class</span>
                        </div>
                    </div>

                    <div class="field-category">
                        <h4>Pricing & Value</h4>
                        <div class="field-option" onclick="addComparisonField('price_per_sf', false)">
                            <span>Price per SF</span>
                        </div>
                        <div class="field-option" onclick="addComparisonField('price_per_unit', false)">
                            <span>Price per Unit</span>
                        </div>
                        <div class="field-option" onclick="addComparisonField('price_per_acre', false)">
                            <span>Price per Acre</span>
                        </div>
                    </div>

                    <div class="field-category">
                        <h4>Property Characteristics</h4>
                        <div class="field-option" onclick="addComparisonField('condition', false)">
                            <span>Condition</span>
                        </div>
                        <div class="field-option" onclick="addComparisonField('construction', false)">
                            <span>Construction</span>
                        </div>
                        <div class="field-option" onclick="addComparisonField('effective_age', false)">
                            <span>Effective Age</span>
                        </div>
                    </div>

                    <div class="field-category">
                        <h4>Adjustments</h4>
                        <div class="field-option" onclick="addComparisonField('economies_of_scale', false)">
                            <span>Economies of Scale</span>
                        </div>
                        <div class="field-option" onclick="addComparisonField('time', false)">
                            <span>Time</span>
                        </div>
                        <div class="field-option" onclick="addComparisonField('type_use', true)">
                            <span>Type/Use</span>
                            <span class="supports-multiple">⊕ Supports Multiple</span>
                        </div>
                        <div class="field-option" onclick="addComparisonField('sidewalk_height', true)">
                            <span>Sidewalk Height</span>
                            <span class="supports-multiple">⊕ Supports Multiple</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- STEP 4: Exhibits & Supporting Documents    -->
        <!-- COMPONENT: ExhibitsStep                     -->
        <!-- FUTURE: src/components/wizard/steps/ExhibitsStep.tsx -->
        <!-- ============================================ -->
        <div class="page-section" id="step-exhibits" style="max-width: 1200px; margin: 0 auto; padding: 40px 24px 120px 24px;">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Upload Exhibits</h2>
            
            <div class="drag-drop-zone" onclick="document.getElementById('exhibitUpload').click()">
                <div class="drag-drop-icon">
                    <i class="material-icons" style="font-size: 48px;">upload_file</i>
                </div>
                <div class="drag-drop-text">Drag files here or click to upload</div>
                <div class="drag-drop-hint">.pdf, .jpg, .png accepted • Multiple files supported</div>
                <input type="file" id="exhibitUpload" multiple accept=".pdf,.jpg,.jpeg,.png" style="display: none;" />
            </div>

            <div class="form-section">
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="border-bottom: 2px solid #e0e0e0;">
                            <th style="padding: 12px; text-align: left; font-size: 13px; font-weight: 600; color: #687F8B; width: 50px;">Order</th>
                            <th style="padding: 12px; text-align: left; font-size: 13px; font-weight: 600; color: #687F8B;">Title</th>
                            <th style="padding: 12px; text-align: left; font-size: 13px; font-weight: 600; color: #687F8B;">File</th>
                            <th style="padding: 12px; text-align: left; font-size: 13px; font-weight: 600; color: #687F8B; width: 100px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid #e0e0e0;">
                            <td style="padding: 12px;">
                                <i class="material-icons" style="cursor: move; color: #687F8B;">drag_indicator</i>
                            </td>
                            <td style="padding: 12px;">
                                <input type="text" class="form-input" placeholder="Exhibit title" />
                            </td>
                            <td style="padding: 12px;">
                                <div style="font-size: 13px; color: #1c3643;">document.pdf <span style="color: #687F8B; font-size: 12px;">(2.4 MB)</span></div>
                            </td>
                            <td style="padding: 12px;">
                                <button style="background: none; border: none; cursor: pointer; color: #0da1c7; margin-right: 8px;">
                                    <i class="material-icons">visibility</i>
                                </button>
                                <button style="background: none; border: none; cursor: pointer; color: #dc3545;">
                                    <i class="material-icons">delete</i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ============================================ -->
        <!-- STEP 5: Final Review & Completion          -->
        <!-- COMPONENT: ReviewStep                       -->
        <!-- FUTURE: src/components/wizard/steps/ReviewStep.tsx -->
        <!-- ============================================ -->
        <div class="page-section" id="step-review" style="max-width: 1200px; margin: 0 auto; padding: 40px 24px 120px 24px;">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Final Value Review</h2>
            
            <div class="info-box">
                <div class="info-box-text">
                    You're all done! Review your valuation, make any final adjustments, and complete the evaluation.
                </div>
            </div>

            <div class="form-section">
                <div class="form-section-title">
                    <i class="material-icons">assessment</i>
                    Valuation Summary
                </div>

                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="border-bottom: 2px solid #e0e0e0;">
                            <th style="padding: 12px; text-align: left; font-size: 13px; font-weight: 600; color: #687F8B;">Approach</th>
                            <th style="padding: 12px; text-align: right; font-size: 13px; font-weight: 600; color: #687F8B;">Value Indicated</th>
                            <th style="padding: 12px; text-align: right; font-size: 13px; font-weight: 600; color: #687F8B;">Weighting</th>
                            <th style="padding: 12px; text-align: right; font-size: 13px; font-weight: 600; color: #687F8B;">Incremental Value</th>
                            <th style="padding: 12px; text-align: right; font-size: 13px; font-weight: 600; color: #687F8B;">$/SF</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid #e0e0e0;">
                            <td style="padding: 12px; font-weight: 600;">Sales Approach</td>
                            <td style="padding: 12px; text-align: right;">$0</td>
                            <td style="padding: 12px; text-align: right;">
                                <input type="text" class="form-input" value="100" style="width: 80px; text-align: right;" /> %
                            </td>
                            <td style="padding: 12px; text-align: right;">$0</td>
                            <td style="padding: 12px; text-align: right;">$0</td>
                        </tr>
                        <tr style="background: #e8f5f7; font-weight: 700;">
                            <td style="padding: 12px;">Market Value</td>
                            <td style="padding: 12px; text-align: right;">$0</td>
                            <td style="padding: 12px; text-align: right;">100%</td>
                            <td style="padding: 12px; text-align: right;">$0</td>
                            <td style="padding: 12px; text-align: right;">$0</td>
                        </tr>
                    </tbody>
                </table>

                <div style="margin-top: 32px;">
                    <div style="font-size: 18px; font-weight: 700; color: #1c3643; margin-bottom: 16px;">Final Market Value: $0</div>
                    
                    <div class="form-group">
                        <label class="form-label">Review Notes</label>
                        <textarea class="form-textarea" placeholder="Add any final review notes..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Reviewed By</label>
                            <select class="form-select">
                                <option value="">Select reviewer</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Review Date</label>
                            <input type="date" class="form-input" />
                        </div>
                    </div>
                </div>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 32px; gap: 16px;">
                <button class="btn-secondary" onclick="window.open('evaluation-report-preview-editor.html', '_blank')" style="padding: 16px 32px; font-size: 16px; display: flex; align-items: center; gap: 8px; background: #0da1c7; color: white; border-color: #0da1c7;">
                    <i class="material-icons">edit</i>
                    PREVIEW & EDIT REPORT
                </button>
                <button class="btn-primary" style="padding: 16px 40px; font-size: 16px;">
                    COMPLETE EVALUATION
                    <i class="material-icons">check_circle</i>
                </button>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- COMPONENT: Wizard Footer Navigation         -->
    <!-- FUTURE: src/components/wizard/WizardFooter.tsx -->
    <!-- ============================================ -->
    <div class="wizard-footer">
        <button class="btn-secondary" onclick="previousStep()">
            <i class="material-icons">arrow_back</i>
            Back
        </button>
        <div>
            <button class="btn-secondary" onclick="saveDraft()" style="margin-right: 12px;">Save Draft</button>
            <button class="btn-primary" onclick="nextStep()">
                Continue
                <i class="material-icons">arrow_forward</i>
            </button>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- JAVASCRIPT: Wizard Logic & Navigation      -->
    <!-- FUTURE: Multiple TypeScript files:         -->
    <!--   - src/hooks/useWizardNavigation.ts       -->
    <!--   - src/hooks/useFormValidation.ts         -->
    <!--   - src/hooks/useAutoSave.ts               -->
    <!--   - src/utils/wizardHelpers.ts             -->
    <!-- ============================================ -->
    <script>
        /* ============================================ */
        /* STATE MANAGEMENT                            */
        /* FUTURE: React Context or Zustand store     */
        /* ============================================ */
        let currentStep = 1;
        const totalSteps = 6;

        /* ============================================ */
        /* EVALUATION TEMPLATES DATA                   */
        /* Real templates from super-admin-evaluation-templates.html */
        /* ============================================ */
        const evaluationTemplates = [
            {
                id: 'commercial-standard',
                name: 'Commercial Evaluation - Standard',
                description: 'Standard commercial property evaluation with income, sales, and cap rate approaches',
                property_type: 'commercial',
                sections_count: 18,
                approaches: 'Income, Sales, Cap',
                accounts: 73,
                is_system: true,
                is_dual_scenario: false,
                is_multi_scenario: false
            },
            {
                id: 'commercial-as-is-completed',
                name: 'Commercial As-Is/As-Completed',
                description: 'Development project evaluation with as-is current condition and as-completed post-construction scenarios',
                property_type: 'commercial',
                sections_count: 20,
                approaches: 'Income, Sales, Cost, Cap',
                accounts: 89,
                is_system: true,
                is_dual_scenario: true,
                is_multi_scenario: false
            },
            {
                id: 'multi-family',
                name: 'Multi-Family Evaluation',
                description: 'Specialized for multi-family properties with unit-level rent roll and income analysis',
                property_type: 'commercial',
                sections_count: 22,
                approaches: 'Income, Multi-Family, Rent Roll',
                accounts: 54,
                is_system: true,
                is_dual_scenario: false,
                is_multi_scenario: false
            },
            {
                id: 'development-lifecycle',
                name: 'Development Lifecycle Analysis',
                description: 'Complete development analysis with as-is, as-stabilized, and as-completed scenarios for major projects',
                property_type: 'commercial',
                sections_count: 24,
                approaches: 'Income, Sales, Cost, Cap',
                accounts: 31,
                is_system: true,
                is_dual_scenario: false,
                is_multi_scenario: true
            },
            {
                id: 'residential-standard',
                name: 'Residential Evaluation - Standard',
                description: 'Quick residential evaluation with sales comparison and cost approach for standard properties',
                property_type: 'residential',
                sections_count: 14,
                approaches: 'Sales, Income, Cost',
                accounts: 96,
                is_system: true,
                is_dual_scenario: false,
                is_multi_scenario: false
            },
            {
                id: 'residential-investment',
                name: 'Residential Investment Analysis',
                description: 'Residential rental property evaluation focusing on income potential and return analysis',
                property_type: 'residential',
                sections_count: 16,
                approaches: 'Income, Sales',
                accounts: 62,
                is_system: true,
                is_dual_scenario: false,
                is_multi_scenario: false
            },
            {
                id: 'residential-rehab',
                name: 'Residential Rehab Project',
                description: 'Residential renovation evaluation with as-is and as-renovated scenarios for flip/rehab projects',
                property_type: 'residential',
                sections_count: 17,
                approaches: 'Sales, Cost',
                accounts: 48,
                is_system: true,
                is_dual_scenario: true,
                is_multi_scenario: false
            },
            {
                id: 'land-development',
                name: 'Land Evaluation - Development',
                description: 'Land valuation for development projects with highest and best use analysis',
                property_type: 'land',
                sections_count: 15,
                approaches: 'Sales, Cost',
                accounts: 38,
                is_system: true,
                is_dual_scenario: false,
                is_multi_scenario: false
            }
        ];

        /* ============================================ */
        /* COMPONENT LOGIC: Template Selection         */
        /* FUTURE: TemplateSelection.tsx state        */
        /* ============================================ */
        let selectedTemplateId = null;

        function selectTemplate(card) {
            // Remove selected class from all template cards
            document.querySelectorAll('.template-card').forEach(c => c.classList.remove('selected'));
            // Add selected class to clicked card
            card.classList.add('selected');
            
            // Store selected template ID
            const templateId = card.getAttribute('data-template-id');
            selectedTemplateId = templateId;
            localStorage.setItem('selectedEvaluationTemplate', templateId);
        }

        /* ============================================ */
        /* PROPERTY TYPE FILTERING                     */
        /* Filter templates based on active property type */
        /* ============================================ */
        function renderTemplates() {
            // Get active property type from localStorage (default to 'commercial')
            const activePropertyType = localStorage.getItem('activePropertyType') || 'commercial';
            
            // Filter templates by property type
            const filteredTemplates = evaluationTemplates.filter(t => t.property_type === activePropertyType);
            
            // Get template grid container
            const templateGrid = document.querySelector('#step-template .template-grid');
            if (!templateGrid) return;
            
            // Clear existing templates
            templateGrid.innerHTML = '';
            
            // Render filtered templates
            filteredTemplates.forEach((template, index) => {
                const isFirst = index === 0;
                const templateCard = document.createElement('div');
                templateCard.className = `template-card${isFirst ? ' selected' : ''}`;
                templateCard.setAttribute('data-template-id', template.id);
                templateCard.setAttribute('data-property-type', template.property_type);
                templateCard.onclick = function() { selectTemplate(this); };
                
                // Build property type badge class
                let propertyBadgeClass = 'property-commercial';
                let propertyBadgeText = 'Commercial';
                if (template.property_type === 'residential') {
                    propertyBadgeClass = 'property-residential';
                    propertyBadgeText = 'Residential';
                } else if (template.property_type === 'land') {
                    propertyBadgeClass = 'property-land';
                    propertyBadgeText = 'Land';
                }
                
                // Build scenario badges
                let scenarioBadges = '';
                if (template.is_dual_scenario) {
                    scenarioBadges = '<span class="badge scenario-dual">Dual Scenario</span>';
                } else if (template.is_multi_scenario) {
                    scenarioBadges = '<span class="badge scenario-multi">Multi-Scenario</span>';
                }
                
                templateCard.innerHTML = `
                    <div class="template-header">
                        <h3 class="template-title">${template.name}</h3>
                        <span class="badge system">System</span>
                    </div>
                    <div class="template-badges">
                        <span class="badge ${propertyBadgeClass}">${propertyBadgeText}</span>
                        <span class="badge type-evaluation">Evaluation</span>
                        ${scenarioBadges}
                    </div>
                    <p class="template-description">
                        ${template.description}
                    </p>
                    <div class="template-stats">
                        <span class="template-stat">
                            <i class="material-icons" style="font-size: 16px;">description</i>
                            ${template.sections_count} sections
                        </span>
                        <span class="template-stat">
                            <i class="material-icons" style="font-size: 16px;">analytics</i>
                            ${template.approaches}
                        </span>
                        <span class="template-stat">
                            <i class="material-icons" style="font-size: 16px;">groups</i>
                            ${template.accounts} accounts
                        </span>
                    </div>
                `;
                
                templateGrid.appendChild(templateCard);
                
                // Set first template as selected by default
                if (isFirst) {
                    selectedTemplateId = template.id;
                    localStorage.setItem('selectedEvaluationTemplate', template.id);
                }
            });
            
            // Show message if no templates available
            if (filteredTemplates.length === 0) {
                templateGrid.innerHTML = '<div style="padding: 40px; text-align: center; color: #687F8B;">No templates available for this property type.</div>';
            }
        }

        // Render templates on page load
        document.addEventListener('DOMContentLoaded', function() {
            renderTemplates();
        });

        /* ============================================ */
        /* COMPONENT LOGIC: Approach Selection        */
        /* FUTURE: SetupStep.tsx state                */
        /* ============================================ */
        function toggleApproach(card) {
            card.classList.toggle('selected');
        }

        /* ============================================ */
        /* WIZARD NAVIGATION                          */
        /* FUTURE: useWizardNavigation.ts hook        */
        /* ============================================ */
        function goToStepDirect(stepNumber) {
            // Hide current step
            document.querySelectorAll('.page-section')[currentStep - 1].classList.remove('active');
            
            // Update to new step
            currentStep = stepNumber;
            document.querySelectorAll('.page-section')[currentStep - 1].classList.add('active');
            
            // Update progress and stepper
            updateProgress();
            updateStepIndicator();
            window.scrollTo(0, 0);
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                document.querySelectorAll('.page-section')[currentStep - 1].classList.remove('active');
                currentStep++;
                document.querySelectorAll('.page-section')[currentStep - 1].classList.add('active');
                updateProgress();
                updateStepIndicator();
                window.scrollTo(0, 0);
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                document.querySelectorAll('.page-section')[currentStep - 1].classList.remove('active');
                currentStep--;
                document.querySelectorAll('.page-section')[currentStep - 1].classList.add('active');
                updateProgress();
                updateStepIndicator();
                window.scrollTo(0, 0);
            }
        }

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function updateStepIndicator() {
            const steps = document.querySelectorAll('.step-item');
            steps.forEach((step, index) => {
                const circle = step.querySelector('.step-circle');
                if (index < currentStep - 1) {
                    circle.classList.add('completed');
                    circle.classList.remove('active');
                    circle.innerHTML = '<i class="material-icons" style="font-size: 20px;">check</i>';
                } else if (index === currentStep - 1) {
                    circle.classList.add('active');
                    circle.classList.remove('completed');
                    circle.textContent = index + 1;
                    step.classList.add('active');
                } else {
                    circle.classList.remove('active', 'completed');
                    circle.textContent = index + 1;
                    step.classList.remove('active');
                }
            });
        }


        /* ============================================ */
        /* OVERVIEW NAVIGATION                        */
        /* FUTURE: OverviewStep.tsx hooks             */
        /* ============================================ */
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                // Update active sidebar item
                document.querySelectorAll('.sidebar-item').forEach(item => item.classList.remove('active'));
                event.target.closest('.sidebar-item').classList.add('active');
            }
        }

        // Character Counter
        document.getElementById('cityInfo')?.addEventListener('input', function() {
            const count = this.value.length;
            const counter = document.getElementById('cityCharCount');
            counter.textContent = count + '/1200 characters';
            
            if (count > 1080) counter.classList.add('warning');
            if (count > 1150) counter.classList.add('danger');
            if (count <= 1080) counter.classList.remove('warning', 'danger');
        });

        document.getElementById('countyInfo')?.addEventListener('input', function() {
            const count = this.value.length;
            const counter = document.getElementById('countyCharCount');
            counter.textContent = count + '/1200 characters';
            
            if (count > 1080) counter.classList.add('warning');
            if (count > 1150) counter.classList.add('danger');
            if (count <= 1080) counter.classList.remove('warning', 'danger');
        });

        // Auto-save
        let autoSaveTimer;
        function triggerAutoSave() {
            clearTimeout(autoSaveTimer);
            const status = document.getElementById('saveStatus');
            status.innerHTML = '<i class="material-icons" style="font-size: 16px;">sync</i> Saving...';
            status.className = 'save-status saving';
            
            autoSaveTimer = setTimeout(() => {
                status.innerHTML = '<i class="material-icons" style="font-size: 16px;">check_circle</i> All changes saved';
                status.className = 'save-status saved';
            }, 2000);
        }

        // ============================================
        // AMENITIES CHIP SELECTOR FUNCTIONALITY
        // ============================================
        const selectedAmenities = new Set();
        const amenityChips = document.querySelectorAll('.amenity-chip');
        const amenitiesSearchInput = document.getElementById('amenitiesSearch');
        const selectedAmenitiesInput = document.getElementById('selectedAmenitiesInput');
        
        // Handle amenity chip clicks
        amenityChips.forEach(chip => {
            chip.addEventListener('click', function() {
                const amenity = this.getAttribute('data-amenity');
                
                if (this.classList.contains('selected')) {
                    // Deselect
                    this.classList.remove('selected');
                    selectedAmenities.delete(amenity);
                } else {
                    // Select
                    this.classList.add('selected');
                    selectedAmenities.add(amenity);
                }
                
                updateSelectedAmenities();
                triggerAutoSave();
            });
        });
        
        // Update hidden input with selected amenities
        function updateSelectedAmenities() {
            const amenitiesArray = Array.from(selectedAmenities);
            selectedAmenitiesInput.value = amenitiesArray.join(', ');
        }
        
        // Search functionality
        if (amenitiesSearchInput) {
            amenitiesSearchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase().trim();
                
                amenityChips.forEach(chip => {
                    const amenityName = chip.getAttribute('data-amenity').toLowerCase();
                    
                    if (amenityName.includes(searchTerm)) {
                        chip.classList.remove('hidden');
                    } else {
                        chip.classList.add('hidden');
                    }
                });
            });
        }

        // Attach auto-save to all inputs
        document.querySelectorAll('.form-input, .form-select, .form-textarea').forEach(input => {
            input.addEventListener('blur', triggerAutoSave);
        });

        // Save Draft
        function saveDraft() {
            const status = document.getElementById('saveStatus');
            status.innerHTML = '<i class="material-icons" style="font-size: 16px;">sync</i> Saving draft...';
            status.className = 'save-status saving';
            
            setTimeout(() => {
                status.innerHTML = '<i class="material-icons" style="font-size: 16px;">check_circle</i> Draft saved';
                status.className = 'save-status saved';
            }, 1000);
        }

        // Scroll tracking for sidebar
        let sections = [];
        let observerOptions = {
            root: null,
            rootMargin: '-50% 0px -50% 0px',
            threshold: 0
        };

        function initScrollTracking() {
            sections = Array.from(document.querySelectorAll('[data-section]'));
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const sectionId = entry.target.getAttribute('data-section');
                        document.querySelectorAll('.sidebar-item').forEach(item => {
                            item.classList.remove('active');
                        });
                        const activeItem = Array.from(document.querySelectorAll('.sidebar-item')).find(item => {
                            return item.getAttribute('onclick')?.includes(sectionId);
                        });
                        if (activeItem) {
                            activeItem.classList.add('active');
                        }
                    }
                });
            }, observerOptions);

            sections.forEach(section => observer.observe(section));
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            initScrollTracking();
        });

        /* ============================================ */
        /* SALES COMPARISON APPROACH FUNCTIONS         */
        /* FUTURE: SalesApproachStep.tsx state        */
        /* ============================================ */
        
        // Field configuration data
        const fieldConfig = {
            multipleAllowed: ['location', 'building_land', 'sales_price', 'zoning', 'type_use', 'sidewalk_height'],
            fieldLabels: {
                'location': 'Location',
                'building_psf': 'Building $/SF',
                'building_land': 'Building Size / Land Area',
                'building_size': 'Building Size',
                'land_size': 'Land Size',
                'quality_condition': 'Quality / Condition',
                'sales_price': 'Sales Price',
                'year_built': 'Year Built / Remodeled',
                'zoning': 'Zoning',
                'condition': 'Condition',
                'construction': 'Construction',
                'economies_of_scale': 'Economies of Scale',
                'time': 'Time',
                'type_use': 'Type/Use',
                'effective_age': 'Effective Age',
                'property_class': 'Property Class',
                'price_per_sf': 'Price per SF',
                'price_per_unit': 'Price per Unit',
                'price_per_acre': 'Price per Acre',
                'sidewalk_height': 'Sidewalk Height'
            }
        };

        // Track added fields (with instance counts)
        let addedFieldCounts = {
            'sales_price': 1,
            'building_land': 1,
            'year_built': 1,
            'quality_condition': 1,
            'zoning': 1,
            'building_psf': 1,
            'condition': 1
        };

        // Open field selector modal
        function openFieldSelector() {
            document.getElementById('fieldSelectorModal').classList.add('active');
        }

        // Close field selector modal
        function closeFieldSelector() {
            document.getElementById('fieldSelectorModal').classList.remove('active');
        }

        // Add a new comparison field to the table
        function addComparisonField(fieldKey, supportsMultiple) {
            if (!addedFieldCounts[fieldKey]) {
                addedFieldCounts[fieldKey] = 0;
            }
            
            addedFieldCounts[fieldKey]++;
            const instanceId = `field-row-${fieldKey}-${addedFieldCounts[fieldKey]}`;
            const fieldLabel = fieldConfig.fieldLabels[fieldKey] || fieldKey;
            
            // Create table row
            const newRow = document.createElement('tr');
            newRow.id = instanceId;
            newRow.innerHTML = `
                <td class="subject-column">
                    <div class="field-with-controls">
                        <select class="field-name-dropdown">
                            <option value="${fieldKey}">${fieldLabel}</option>
                        </select>
                        <button class="btn-remove-field" onclick="removeTableField('${instanceId}')" title="Remove field">
                            <i class="material-icons">close</i>
                        </button>
                        ${supportsMultiple ? `
                        <button class="btn-add-instance" onclick="addTableFieldInstance('${fieldKey}')" title="Add another instance">
                            <i class="material-icons">add</i>
                        </button>
                        ` : ''}
                    </div>
                </td>
                <td class="comp-column comp-value-cell">-</td>
                <td class="comp-column comp-value-cell">-</td>
                <td class="comp-column comp-value-cell">-</td>
                <td class="comp-column comp-value-cell">-</td>
            `;
            
            // Insert before the summary rows
            const summaryRow = document.querySelector('.summary-row');
            if (summaryRow) {
                summaryRow.parentNode.insertBefore(newRow, summaryRow);
            }
            
            closeFieldSelector();
        }

        // Add another instance of an existing field
        function addFieldInstance(fieldKey) {
            const supportsMultiple = fieldConfig.multipleAllowed.includes(fieldKey);
            addComparisonField(fieldKey, supportsMultiple);
        }

        // Remove a comparison field from the table
        function removeTableField(rowId) {
            const row = document.getElementById(rowId);
            if (row && confirm('Remove this comparison field from the table?')) {
                row.style.opacity = '0';
                setTimeout(() => {
                    row.remove();
                }, 200);
            }
        }

        // Add another instance of a field in the table
        function addTableFieldInstance(fieldKey) {
            addedFieldCounts[fieldKey]++;
            const instanceId = `field-row-${fieldKey}-${addedFieldCounts[fieldKey]}`;
            const fieldLabel = fieldConfig.fieldLabels[fieldKey] || fieldKey;
            const supportsMultiple = fieldConfig.multipleAllowed.includes(fieldKey);
            
            const newRow = document.createElement('tr');
            newRow.id = instanceId;
            newRow.innerHTML = `
                <td class="subject-column">
                    <div class="field-with-controls">
                        <select class="field-name-dropdown">
                            <option value="${fieldKey}">${fieldLabel}</option>
                        </select>
                        <button class="btn-remove-field" onclick="removeTableField('${instanceId}')" title="Remove field">
                            <i class="material-icons">close</i>
                        </button>
                        ${supportsMultiple ? `
                        <button class="btn-add-instance" onclick="addTableFieldInstance('${fieldKey}')" title="Add another instance">
                            <i class="material-icons">add</i>
                        </button>
                        ` : ''}
                    </div>
                </td>
                <td class="comp-column comp-value-cell">-</td>
                <td class="comp-column comp-value-cell">-</td>
                <td class="comp-column comp-value-cell">-</td>
                <td class="comp-column comp-value-cell">-</td>
            `;
            
            // Insert before the summary rows
            const summaryRow = document.querySelector('.summary-row');
            if (summaryRow) {
                summaryRow.parentNode.insertBefore(newRow, summaryRow);
            }
        }

        // Filter field options in modal
        function filterFieldOptions(searchTerm) {
            const options = document.querySelectorAll('.field-option');
            const term = searchTerm.toLowerCase();
            
            options.forEach(option => {
                const text = option.textContent.toLowerCase();
                option.style.display = text.includes(term) ? 'flex' : 'none';
            });
        }

        // Calculate adjustments
        function calculateAdjustments() {
            // TODO: Implement real-time adjustment calculations
            console.log('Calculating adjustments...');
        }

        // Open Link Comps Modal (placeholder - would open comps list)
        function openLinkCompsModal() {
            alert('Link Existing Comps modal would open here.\n\nThis would show the comps list from prototypes/comps-premium-with-clustering.html with checkboxes to select comps to link.');
            
            // Demo: show comp cards
            document.getElementById('emptyStateComps').style.display = 'none';
            document.getElementById('compCardsGrid').style.display = 'grid';
        }

        // Open Add Comp Modal (placeholder - would open comp creation form)
        function openAddCompModal() {
            alert('Add New Comp modal would open here.\n\nThis would show the comp creation form from prototypes/comps-create-full-page.html');
        }

        // Open Upload Comps Modal
        function openUploadCompsModal() {
            alert('Upload Comps modal would open here.\n\nThis would allow PDF upload for batch comp import.');
        }

        // Remove a comp
        function removeComp(compId) {
            if (confirm('Are you sure you want to remove this comp from the sales approach?')) {
                // TODO: Implement comp removal
                console.log('Removing comp:', compId);
            }
        }
    </script>
</body>
</html>

